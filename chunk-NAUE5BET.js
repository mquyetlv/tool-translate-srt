import{a as Pn}from"./chunk-YIPECVR7.js";import{a as _n,d as vn,e as xn,f as Sn,g as An,l as Gn,m as qn,n as zn,o as Hn,p as Bn,s as $n,t as Kn,u as Yn,v as Wn,w as Jn,x as On,y as Qn}from"./chunk-HFPUIJYE.js";import{e as Tn,ga as Mn,ha as Y,ja as Dn,ka as Rn,m as En,ma as wn,na as Nn,oa as Vn,pa as Fn,qa as Ln,sa as Un,ua as kn}from"./chunk-VDDWZVFU.js";import{$b as $,Cb as D,Ib as O,Jb as re,Kc as In,Lb as se,Lc as Ge,Mb as le,Mc as he,Nb as _,Ob as y,Oc as qe,Pb as F,Qb as ae,Rb as ue,Tb as ke,Zb as H,db as hn,eb as S,gc as gn,ha as oe,hc as I,ic as ce,jc as fe,kc as Cn,lc as de,mc as pe,nc as me,pb as Z,pc as yn,sa as N,ta as V,vb as K}from"./chunk-BUHHSWGB.js";import{a as Le,b as Ue,e as C}from"./chunk-AP4OEWII.js";var j=class{};function A(s,n){let e=/\{([^}]+)\}/g;return s.replace(e,(t,r)=>{if(Object.prototype.hasOwnProperty.call(n,r)){let l=n[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function o(s,n,e){for(let l=0;l<n.length-1;l++){let u=n[l];if(u.endsWith("[]")){let a=u.slice(0,-2);if(!(a in s))if(Array.isArray(e))s[a]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(s[a])){let c=s[a];if(Array.isArray(e))for(let f=0;f<c.length;f++){let d=c[f];o(d,n.slice(l+1),e[f])}else for(let f of c)o(f,n.slice(l+1),e)}return}else if(u.endsWith("[0]")){let a=u.slice(0,-3);a in s||(s[a]=[{}]);let c=s[a];o(c[0],n.slice(l+1),e);return}(!s[u]||typeof s[u]!="object")&&(s[u]={}),s=s[u]}let t=n[n.length-1],r=s[t];if(r!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===r)return;if(typeof r=="object"&&typeof e=="object"&&r!==null&&e!==null)Object.assign(r,e);else throw new Error(`Cannot set value for an existing key. Key: ${t}`)}else s[t]=e}function i(s,n){try{if(n.length===1&&n[0]==="_self")return s;for(let e=0;e<n.length;e++){if(typeof s!="object"||s===null)return;let t=n[e];if(t.endsWith("[]")){let r=t.slice(0,-2);if(r in s){let l=s[r];return Array.isArray(l)?l.map(u=>i(u,n.slice(e+1))):void 0}else return}else s=s[t]}return s}catch(e){if(e instanceof TypeError)return;throw e}}function L(s,n){if(!n||typeof n!="string")throw new Error("model is required and must be a string");if(s.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){let e=n.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${n}`}else return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function pt(s,n){let e=L(s,n);return e?e.startsWith("publishers/")&&s.isVertexAI()?`projects/${s.getProject()}/locations/${s.getLocation()}/${e}`:e.startsWith("models/")&&s.isVertexAI()?`projects/${s.getProject()}/locations/${s.getLocation()}/publishers/google/${e}`:e:""}function Xn(s,n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function mt(s,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Xn(s,e)):[Xn(s,n)]}function ze(s){return s!=null&&typeof s=="object"&&"parts"in s&&Array.isArray(s.parts)}function Zn(s){return s!=null&&typeof s=="object"&&"functionCall"in s}function bn(s){return s!=null&&typeof s=="object"&&"functionResponse"in s}function z(s,n){if(n==null)throw new Error("ContentUnion is required");return ze(n)?n:{role:"user",parts:mt(s,n)}}function ht(s,n){if(!n)return[];if(s.isVertexAI()&&Array.isArray(n))return n.flatMap(e=>{let t=z(s,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]});if(s.isVertexAI()){let e=z(s,n);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(n)?n.map(e=>z(s,e)):[z(s,n)]}function R(s,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Zn(n)||bn(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[z(s,n)]}let e=[],t=[],r=ze(n[0]);for(let l of n){let u=ze(l);if(u!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)e.push(l);else{if(Zn(l)||bn(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(l)}}return r||e.push({role:"user",parts:mt(s,t)}),e}function ye(s,n){if(!s.isVertexAI()&&"default"in n)throw new Error("Default value is not supported in the response schema for the Gemini API.");if("anyOf"in n&&n.anyOf!==void 0)for(let e of n.anyOf)ye(s,e);if("items"in n&&n.items!==void 0&&ye(s,n.items),"properties"in n&&n.properties!==void 0)for(let e of Object.values(n.properties))ye(s,e)}function gt(s,n){return ye(s,n),n}function Ct(s,n){if(typeof n=="object"&&"voiceConfig"in n)return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Re(s,n){return n}function B(s,n){if(!Array.isArray(n))throw new Error("tool is required and must be an array of Tools");return n}function Lt(s,n,e,t=1){let r=!n.startsWith(`${e}/`)&&n.split("/").length===t;return s.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${s.getProject()}/${n}`:n.startsWith(`${e}/`)?`projects/${s.getProject()}/locations/${s.getLocation()}/${n}`:r?`projects/${s.getProject()}/locations/${s.getLocation()}/${e}/${n}`:n:r?`${e}/${n}`:n}function W(s,n){if(typeof n!="string")throw new Error("name must be a string");return Lt(s,n,"cachedContents")}function J(s,n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function yt(s,n){if(typeof n!="string")throw new Error("fromName must be a string");return n.startsWith("files/")?n.split("files/")[1]:n}function Ut(s,n){let e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");let t=i(n,["thought"]);t!=null&&o(e,["thought"],t);let r=i(n,["codeExecutionResult"]);r!=null&&o(e,["codeExecutionResult"],r);let l=i(n,["executableCode"]);l!=null&&o(e,["executableCode"],l);let u=i(n,["fileData"]);u!=null&&o(e,["fileData"],u);let a=i(n,["functionCall"]);a!=null&&o(e,["functionCall"],a);let c=i(n,["functionResponse"]);c!=null&&o(e,["functionResponse"],c);let f=i(n,["inlineData"]);f!=null&&o(e,["inlineData"],f);let d=i(n,["text"]);return d!=null&&o(e,["text"],d),e}function jn(s,n){let e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Ut(s,l))):o(e,["parts"],t));let r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function kt(s,n){let e={};if(i(n,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");let t=i(n,["description"]);t!=null&&o(e,["description"],t);let r=i(n,["name"]);r!=null&&o(e,["name"],r);let l=i(n,["parameters"]);return l!=null&&o(e,["parameters"],l),e}function Gt(){return{}}function qt(s,n){let e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);let r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function zt(s,n){let e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],qt(s,t)),e}function Ht(s,n){let e={},t=i(n,["functionDeclarations"]);if(t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(a=>kt(s,a))):o(e,["functionDeclarations"],t)),i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&o(e,["googleSearch"],Gt());let l=i(n,["googleSearchRetrieval"]);l!=null&&o(e,["googleSearchRetrieval"],zt(s,l));let u=i(n,["codeExecution"]);return u!=null&&o(e,["codeExecution"],u),e}function Bt(s,n){let e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);let r=i(n,["allowedFunctionNames"]);return r!=null&&o(e,["allowedFunctionNames"],r),e}function $t(s,n){let e={},t=i(n,["functionCallingConfig"]);return t!=null&&o(e,["functionCallingConfig"],Bt(s,t)),e}function Kt(s,n,e){let t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&o(e,["ttl"],r);let l=i(n,["expireTime"]);e!==void 0&&l!=null&&o(e,["expireTime"],l);let u=i(n,["displayName"]);e!==void 0&&u!=null&&o(e,["displayName"],u);let a=i(n,["contents"]);e!==void 0&&a!=null&&(Array.isArray(a)?o(e,["contents"],R(s,R(s,a).map(p=>jn(s,p)))):o(e,["contents"],R(s,a)));let c=i(n,["systemInstruction"]);e!==void 0&&c!=null&&o(e,["systemInstruction"],jn(s,z(s,c)));let f=i(n,["tools"]);e!==void 0&&f!=null&&(Array.isArray(f)?o(e,["tools"],f.map(p=>Ht(s,p))):o(e,["tools"],f));let d=i(n,["toolConfig"]);return e!==void 0&&d!=null&&o(e,["toolConfig"],$t(s,d)),t}function Yt(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["model"],pt(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],Kt(s,r,e)),e}function Wt(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],W(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Jt(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],W(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Ot(s,n,e){let t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&o(e,["ttl"],r);let l=i(n,["expireTime"]);return e!==void 0&&l!=null&&o(e,["expireTime"],l),t}function Qt(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],W(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],Ot(s,r,e)),e}function Xt(s,n,e){let t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&o(e,["_query","pageSize"],r);let l=i(n,["pageToken"]);return e!==void 0&&l!=null&&o(e,["_query","pageToken"],l),t}function Zt(s,n){let e={},t=i(n,["config"]);return t!=null&&o(e,["config"],Xt(s,t,e)),e}function bt(s,n){let e={},t=i(n,["videoMetadata"]);t!=null&&o(e,["videoMetadata"],t);let r=i(n,["thought"]);r!=null&&o(e,["thought"],r);let l=i(n,["codeExecutionResult"]);l!=null&&o(e,["codeExecutionResult"],l);let u=i(n,["executableCode"]);u!=null&&o(e,["executableCode"],u);let a=i(n,["fileData"]);a!=null&&o(e,["fileData"],a);let c=i(n,["functionCall"]);c!=null&&o(e,["functionCall"],c);let f=i(n,["functionResponse"]);f!=null&&o(e,["functionResponse"],f);let d=i(n,["inlineData"]);d!=null&&o(e,["inlineData"],d);let p=i(n,["text"]);return p!=null&&o(e,["text"],p),e}function et(s,n){let e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>bt(s,l))):o(e,["parts"],t));let r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function jt(s,n){let e={},t=i(n,["example"]);t!=null&&o(e,["example"],t);let r=i(n,["pattern"]);r!=null&&o(e,["pattern"],r);let l=i(n,["default"]);l!=null&&o(e,["default"],l);let u=i(n,["maxLength"]);u!=null&&o(e,["maxLength"],u);let a=i(n,["minLength"]);a!=null&&o(e,["minLength"],a);let c=i(n,["minProperties"]);c!=null&&o(e,["minProperties"],c);let f=i(n,["maxProperties"]);f!=null&&o(e,["maxProperties"],f);let d=i(n,["anyOf"]);d!=null&&o(e,["anyOf"],d);let p=i(n,["description"]);p!=null&&o(e,["description"],p);let h=i(n,["enum"]);h!=null&&o(e,["enum"],h);let m=i(n,["format"]);m!=null&&o(e,["format"],m);let g=i(n,["items"]);g!=null&&o(e,["items"],g);let T=i(n,["maxItems"]);T!=null&&o(e,["maxItems"],T);let E=i(n,["maximum"]);E!=null&&o(e,["maximum"],E);let v=i(n,["minItems"]);v!=null&&o(e,["minItems"],v);let x=i(n,["minimum"]);x!=null&&o(e,["minimum"],x);let M=i(n,["nullable"]);M!=null&&o(e,["nullable"],M);let P=i(n,["properties"]);P!=null&&o(e,["properties"],P);let w=i(n,["propertyOrdering"]);w!=null&&o(e,["propertyOrdering"],w);let k=i(n,["required"]);k!=null&&o(e,["required"],k);let G=i(n,["title"]);G!=null&&o(e,["title"],G);let q=i(n,["type"]);return q!=null&&o(e,["type"],q),e}function eo(s,n){let e={},t=i(n,["response"]);t!=null&&o(e,["response"],jt(s,t));let r=i(n,["description"]);r!=null&&o(e,["description"],r);let l=i(n,["name"]);l!=null&&o(e,["name"],l);let u=i(n,["parameters"]);return u!=null&&o(e,["parameters"],u),e}function no(){return{}}function to(s,n){let e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);let r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function oo(s,n){let e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],to(s,t)),e}function io(s,n){let e={},t=i(n,["functionDeclarations"]);t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(c=>eo(s,c))):o(e,["functionDeclarations"],t));let r=i(n,["retrieval"]);r!=null&&o(e,["retrieval"],r),i(n,["googleSearch"])!=null&&o(e,["googleSearch"],no());let u=i(n,["googleSearchRetrieval"]);u!=null&&o(e,["googleSearchRetrieval"],oo(s,u));let a=i(n,["codeExecution"]);return a!=null&&o(e,["codeExecution"],a),e}function ro(s,n){let e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);let r=i(n,["allowedFunctionNames"]);return r!=null&&o(e,["allowedFunctionNames"],r),e}function so(s,n){let e={},t=i(n,["functionCallingConfig"]);return t!=null&&o(e,["functionCallingConfig"],ro(s,t)),e}function lo(s,n,e){let t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&o(e,["ttl"],r);let l=i(n,["expireTime"]);e!==void 0&&l!=null&&o(e,["expireTime"],l);let u=i(n,["displayName"]);e!==void 0&&u!=null&&o(e,["displayName"],u);let a=i(n,["contents"]);e!==void 0&&a!=null&&(Array.isArray(a)?o(e,["contents"],R(s,R(s,a).map(p=>et(s,p)))):o(e,["contents"],R(s,a)));let c=i(n,["systemInstruction"]);e!==void 0&&c!=null&&o(e,["systemInstruction"],et(s,z(s,c)));let f=i(n,["tools"]);e!==void 0&&f!=null&&(Array.isArray(f)?o(e,["tools"],f.map(p=>io(s,p))):o(e,["tools"],f));let d=i(n,["toolConfig"]);return e!==void 0&&d!=null&&o(e,["toolConfig"],so(s,d)),t}function ao(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["model"],pt(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],lo(s,r,e)),e}function uo(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],W(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function co(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],W(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function fo(s,n,e){let t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&o(e,["ttl"],r);let l=i(n,["expireTime"]);return e!==void 0&&l!=null&&o(e,["expireTime"],l),t}function po(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],W(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],fo(s,r,e)),e}function mo(s,n,e){let t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&o(e,["_query","pageSize"],r);let l=i(n,["pageToken"]);return e!==void 0&&l!=null&&o(e,["_query","pageToken"],l),t}function ho(s,n){let e={},t=i(n,["config"]);return t!=null&&o(e,["config"],mo(s,t,e)),e}function Te(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);let r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);let l=i(n,["model"]);l!=null&&o(e,["model"],l);let u=i(n,["createTime"]);u!=null&&o(e,["createTime"],u);let a=i(n,["updateTime"]);a!=null&&o(e,["updateTime"],a);let c=i(n,["expireTime"]);c!=null&&o(e,["expireTime"],c);let f=i(n,["usageMetadata"]);return f!=null&&o(e,["usageMetadata"],f),e}function go(){return{}}function Co(s,n){let e={},t=i(n,["nextPageToken"]);t!=null&&o(e,["nextPageToken"],t);let r=i(n,["cachedContents"]);return r!=null&&(Array.isArray(r)?o(e,["cachedContents"],r.map(l=>Te(s,l))):o(e,["cachedContents"],r)),e}function Ee(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);let r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);let l=i(n,["model"]);l!=null&&o(e,["model"],l);let u=i(n,["createTime"]);u!=null&&o(e,["createTime"],u);let a=i(n,["updateTime"]);a!=null&&o(e,["updateTime"],a);let c=i(n,["expireTime"]);c!=null&&o(e,["expireTime"],c);let f=i(n,["usageMetadata"]);return f!=null&&o(e,["usageMetadata"],f),e}function yo(){return{}}function To(s,n){let e={},t=i(n,["nextPageToken"]);t!=null&&o(e,["nextPageToken"],t);let r=i(n,["cachedContents"]);return r!=null&&(Array.isArray(r)?o(e,["cachedContents"],r.map(l=>Ee(s,l))):o(e,["cachedContents"],r)),e}var un=function(s){return s.PAGED_ITEM_BATCH_JOBS="batchJobs",s.PAGED_ITEM_MODELS="models",s.PAGED_ITEM_TUNING_JOBS="tuningJobs",s.PAGED_ITEM_FILES="files",s.PAGED_ITEM_CACHED_CONTENTS="cachedContents",s}(un||{}),_e=class{constructor(n,e,t,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(n,t,r)}init(n,e,t){var r,l;this.nameInternal=n,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let u={config:{}};t?typeof t=="object"?u=Object.assign({},t):u=t:u={config:{}},u.config&&(u.config.pageToken=e.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:()=>C(this,null,function*(){if(this.idxInternal>=this.pageLength)if(this.hasNextPage())yield this.nextPage();else return{value:void 0,done:!0};let n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}}),return:()=>C(this,null,function*(){return{value:void 0,done:!0}})}}nextPage(){return C(this,null,function*(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let n=yield this.requestInternal(this.params);return this.initNextPage(n),this.page})}hasNextPage(){var n;return((n=this.params.config)===null||n===void 0?void 0:n.pageToken)!==void 0}};var He=function(s){return s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.AUDIO="AUDIO",s}(He||{});var b=class{get text(){var n,e,t,r,l,u,a,c;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",d=!1,p=[];for(let h of(c=(a=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(let[m,g]of Object.entries(h))m!=="text"&&m!=="thought"&&(g!==null||g!==void 0)&&p.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;d=!0,f+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?f:void 0}get functionCalls(){var n,e,t,r,l,u,a,c;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let f=(c=(a=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(f?.length!==0)return f}get executableCode(){var n,e,t,r,l,u,a,c,f;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let d=(c=(a=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var n,e,t,r,l,u,a,c,f;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let d=(c=(a=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.output}},ve=class{},Ie=class{},xe=class{},Be=class{};var Se=class{},Ae=class{},$e=class{},ie=class{constructor(n){let e={};for(let t of n.headers.entries())e[t[0]]=t[1];this.headers=e,this.responseInternal=n}json(){return this.responseInternal.json()}},Ke=class{},Ye=class{};var We=class extends j{constructor(n){super(),this.apiClient=n,this.list=(...t)=>C(this,[...t],function*(e={}){return new _e(un.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),yield this.listInternal(e),e)})}create(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=ao(this.apiClient,n);return l=A("cachedContents",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>Ee(this.apiClient,c))}else{let a=Yt(this.apiClient,n);return l=A("cachedContents",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>Te(this.apiClient,c))}})}get(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=uo(this.apiClient,n);return l=A("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>Ee(this.apiClient,c))}else{let a=Wt(this.apiClient,n);return l=A("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>Te(this.apiClient,c))}})}delete(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=co(this.apiClient,n);return l=A("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(()=>{let c=yo(),f=new Se;return Object.assign(f,c),f})}else{let a=Jt(this.apiClient,n);return l=A("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(()=>{let c=go(),f=new Se;return Object.assign(f,c),f})}})}update(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=po(this.apiClient,n);return l=A("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"PATCH",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>Ee(this.apiClient,c))}else{let a=Qt(this.apiClient,n);return l=A("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"PATCH",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>Te(this.apiClient,c))}})}listInternal(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=ho(this.apiClient,n);return l=A("cachedContents",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>{let f=To(this.apiClient,c),d=new Ae;return Object.assign(d,f),d})}else{let a=Zt(this.apiClient,n);return l=A("cachedContents",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>{let f=Co(this.apiClient,c),d=new Ae;return Object.assign(d,f),d})}})}};function nt(s){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&s[n],t=0;if(e)return e.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&t>=s.length&&(s=void 0),{value:s&&s[t++],done:!s}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(s){return this instanceof U?(this.v=s,this):new U(s)}function Pe(s,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(s,n||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(m){return function(g){return Promise.resolve(g).then(m,p)}}function a(m,g){t[m]&&(r[m]=function(T){return new Promise(function(E,v){l.push([m,T,E,v])>1||c(m,T)})},g&&(r[m]=g(r[m])))}function c(m,g){try{f(t[m](g))}catch(T){h(l[0][3],T)}}function f(m){m.value instanceof U?Promise.resolve(m.value.v).then(d,p):h(l[0][2],m)}function d(m){c("next",m)}function p(m){c("throw",m)}function h(m,g){m(g),l.shift(),l.length&&c(l[0][0],l[0][1])}}function Je(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=s[Symbol.asyncIterator],e;return n?n.call(s):(s=typeof nt=="function"?nt(s):s[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(l){e[l]=s[l]&&function(u){return new Promise(function(a,c){u=s[l](u),r(a,c,u.done,u.value)})}}function r(l,u,a,c){Promise.resolve(c).then(function(f){l({value:f,done:a})},u)}}function Eo(s){var n;if(s.candidates==null||s.candidates.length===0)return!1;let e=(n=s.candidates[0])===null||n===void 0?void 0:n.content;return e===void 0?!1:Tt(e)}function Tt(s){if(s.parts===void 0||s.parts.length===0)return!1;for(let n of s.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}function _o(s){if(s.length!==0){if(s[0].role!=="user")throw new Error("History must start with a user turn.");for(let n of s)if(n.role!=="user"&&n.role!=="model")throw new Error(`Role must be user or model, but got ${n.role}.`)}}function vo(s){if(s===void 0||s.length===0)return[];let n=[],e=s.length,t=0,r=s[0];for(;t<e;)if(s[t].role==="user")r=s[t],t++;else{let l=[],u=!0;for(;t<e&&s[t].role==="model";)l.push(s[t]),u&&!Tt(s[t])&&(u=!1),t++;u&&(n.push(r),n.push(...l))}return n}var Oe=class{constructor(n,e){this.modelsModule=n,this.apiClient=e}create(n){return new Qe(this.apiClient,this.modelsModule,n.model,n.config,n.history)}},Qe=class{constructor(n,e,t,r={},l=[]){this.apiClient=n,this.modelsModule=e,this.model=t,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),_o(l)}sendMessage(n){return C(this,null,function*(){var e;yield this.sendPromise;let t=z(this.apiClient,n.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(t),config:(e=n.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=C(this,null,function*(){var l,u;let c=(u=(l=(yield r).candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,f=c?[c]:[];this.recordHistory(t,f)}),yield this.sendPromise,r})}sendMessageStream(n){return C(this,null,function*(){var e;yield this.sendPromise;let t=z(this.apiClient,n.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(t),config:(e=n.config)!==null&&e!==void 0?e:this.config});this.sendPromise=r.then(()=>{});let l=yield r;return this.processStreamResponse(l,t)})}getHistory(n=!1){return n?vo(this.history):this.history}processStreamResponse(n,e){var t,r;return Pe(this,arguments,function*(){var u,a,c,f;let d=[];try{for(var p=!0,h=Je(n),m;m=yield U(h.next()),u=m.done,!u;p=!0){f=m.value,p=!1;let g=f;if(Eo(g)){let T=(r=(t=g.candidates)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.content;T!==void 0&&d.push(T)}yield yield U(g)}}catch(g){a={error:g}}finally{try{!p&&!u&&(c=h.return)&&(yield U(c.call(h)))}finally{if(a)throw a.error}}this.recordHistory(e,d)})}recordHistory(n,e){let t=[];e.length>0&&e.every(r=>r.role==="model")?t=e:t.push({role:"model",parts:[]}),this.history.push(n),this.history.push(...t)}};function Io(s,n,e){let t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&o(e,["_query","pageSize"],r);let l=i(n,["pageToken"]);return e!==void 0&&l!=null&&o(e,["_query","pageToken"],l),t}function xo(s,n){let e={},t=i(n,["config"]);return t!=null&&o(e,["config"],Io(s,t,e)),e}function So(s,n){let e={},t=i(n,["details"]);t!=null&&o(e,["details"],t);let r=i(n,["message"]);r!=null&&o(e,["message"],r);let l=i(n,["code"]);return l!=null&&o(e,["code"],l),e}function Ao(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);let r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);let l=i(n,["mimeType"]);l!=null&&o(e,["mimeType"],l);let u=i(n,["sizeBytes"]);u!=null&&o(e,["sizeBytes"],u);let a=i(n,["createTime"]);a!=null&&o(e,["createTime"],a);let c=i(n,["expirationTime"]);c!=null&&o(e,["expirationTime"],c);let f=i(n,["updateTime"]);f!=null&&o(e,["updateTime"],f);let d=i(n,["sha256Hash"]);d!=null&&o(e,["sha256Hash"],d);let p=i(n,["uri"]);p!=null&&o(e,["uri"],p);let h=i(n,["downloadUri"]);h!=null&&o(e,["downloadUri"],h);let m=i(n,["state"]);m!=null&&o(e,["state"],m);let g=i(n,["source"]);g!=null&&o(e,["source"],g);let T=i(n,["videoMetadata"]);T!=null&&o(e,["videoMetadata"],T);let E=i(n,["error"]);return E!=null&&o(e,["error"],So(s,E)),e}function Po(s,n){let e={},t=i(n,["file"]);t!=null&&o(e,["file"],Ao(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Mo(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["_url","file"],yt(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Do(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["_url","file"],yt(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Ro(s,n){let e={},t=i(n,["details"]);t!=null&&o(e,["details"],t);let r=i(n,["message"]);r!=null&&o(e,["message"],r);let l=i(n,["code"]);return l!=null&&o(e,["code"],l),e}function Xe(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);let r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);let l=i(n,["mimeType"]);l!=null&&o(e,["mimeType"],l);let u=i(n,["sizeBytes"]);u!=null&&o(e,["sizeBytes"],u);let a=i(n,["createTime"]);a!=null&&o(e,["createTime"],a);let c=i(n,["expirationTime"]);c!=null&&o(e,["expirationTime"],c);let f=i(n,["updateTime"]);f!=null&&o(e,["updateTime"],f);let d=i(n,["sha256Hash"]);d!=null&&o(e,["sha256Hash"],d);let p=i(n,["uri"]);p!=null&&o(e,["uri"],p);let h=i(n,["downloadUri"]);h!=null&&o(e,["downloadUri"],h);let m=i(n,["state"]);m!=null&&o(e,["state"],m);let g=i(n,["source"]);g!=null&&o(e,["source"],g);let T=i(n,["videoMetadata"]);T!=null&&o(e,["videoMetadata"],T);let E=i(n,["error"]);return E!=null&&o(e,["error"],Ro(s,E)),e}function wo(s,n){let e={},t=i(n,["nextPageToken"]);t!=null&&o(e,["nextPageToken"],t);let r=i(n,["files"]);return r!=null&&(Array.isArray(r)?o(e,["files"],r.map(l=>Xe(s,l))):o(e,["files"],r)),e}function No(){return{}}function Vo(){return{}}var Ze=class extends j{constructor(n){super(),this.apiClient=n,this.list=(...t)=>C(this,[...t],function*(e={}){return new _e(un.PAGED_ITEM_FILES,r=>this.listInternal(r),yield this.listInternal(e),e)})}upload(n){return C(this,null,function*(){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(e=>Xe(this.apiClient,e))})}listInternal(n){return C(this,null,function*(){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=xo(this.apiClient,n);return r=A("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),t.then(a=>{let c=wo(this.apiClient,a),f=new $e;return Object.assign(f,c),f})}})}createInternal(n){return C(this,null,function*(){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Po(this.apiClient,n);return r=A("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),t.then(()=>{let a=No(),c=new Ke;return Object.assign(c,a),c})}})}get(n){return C(this,null,function*(){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Mo(this.apiClient,n);return r=A("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),t.then(a=>Xe(this.apiClient,a))}})}delete(n){return C(this,null,function*(){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Do(this.apiClient,n);return r=A("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),t.then(()=>{let a=Vo(),c=new Ye;return Object.assign(c,a),c})}})}};function Fo(s,n){let e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");let t=i(n,["thought"]);t!=null&&o(e,["thought"],t);let r=i(n,["codeExecutionResult"]);r!=null&&o(e,["codeExecutionResult"],r);let l=i(n,["executableCode"]);l!=null&&o(e,["executableCode"],l);let u=i(n,["fileData"]);u!=null&&o(e,["fileData"],u);let a=i(n,["functionCall"]);a!=null&&o(e,["functionCall"],a);let c=i(n,["functionResponse"]);c!=null&&o(e,["functionResponse"],c);let f=i(n,["inlineData"]);f!=null&&o(e,["inlineData"],f);let d=i(n,["text"]);return d!=null&&o(e,["text"],d),e}function Lo(s,n){let e={},t=i(n,["videoMetadata"]);t!=null&&o(e,["videoMetadata"],t);let r=i(n,["thought"]);r!=null&&o(e,["thought"],r);let l=i(n,["codeExecutionResult"]);l!=null&&o(e,["codeExecutionResult"],l);let u=i(n,["executableCode"]);u!=null&&o(e,["executableCode"],u);let a=i(n,["fileData"]);a!=null&&o(e,["fileData"],a);let c=i(n,["functionCall"]);c!=null&&o(e,["functionCall"],c);let f=i(n,["functionResponse"]);f!=null&&o(e,["functionResponse"],f);let d=i(n,["inlineData"]);d!=null&&o(e,["inlineData"],d);let p=i(n,["text"]);return p!=null&&o(e,["text"],p),e}function Uo(s,n){let e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Fo(s,l))):o(e,["parts"],t));let r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function ko(s,n){let e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Lo(s,l))):o(e,["parts"],t));let r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Go(s,n){let e={},t=i(n,["example"]);t!=null&&o(e,["example"],t);let r=i(n,["pattern"]);r!=null&&o(e,["pattern"],r);let l=i(n,["default"]);l!=null&&o(e,["default"],l);let u=i(n,["maxLength"]);u!=null&&o(e,["maxLength"],u);let a=i(n,["minLength"]);a!=null&&o(e,["minLength"],a);let c=i(n,["minProperties"]);c!=null&&o(e,["minProperties"],c);let f=i(n,["maxProperties"]);f!=null&&o(e,["maxProperties"],f);let d=i(n,["anyOf"]);d!=null&&o(e,["anyOf"],d);let p=i(n,["description"]);p!=null&&o(e,["description"],p);let h=i(n,["enum"]);h!=null&&o(e,["enum"],h);let m=i(n,["format"]);m!=null&&o(e,["format"],m);let g=i(n,["items"]);g!=null&&o(e,["items"],g);let T=i(n,["maxItems"]);T!=null&&o(e,["maxItems"],T);let E=i(n,["maximum"]);E!=null&&o(e,["maximum"],E);let v=i(n,["minItems"]);v!=null&&o(e,["minItems"],v);let x=i(n,["minimum"]);x!=null&&o(e,["minimum"],x);let M=i(n,["nullable"]);M!=null&&o(e,["nullable"],M);let P=i(n,["properties"]);P!=null&&o(e,["properties"],P);let w=i(n,["propertyOrdering"]);w!=null&&o(e,["propertyOrdering"],w);let k=i(n,["required"]);k!=null&&o(e,["required"],k);let G=i(n,["title"]);G!=null&&o(e,["title"],G);let q=i(n,["type"]);return q!=null&&o(e,["type"],q),e}function qo(s,n){let e={};if(i(n,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");let t=i(n,["description"]);t!=null&&o(e,["description"],t);let r=i(n,["name"]);r!=null&&o(e,["name"],r);let l=i(n,["parameters"]);return l!=null&&o(e,["parameters"],l),e}function zo(s,n){let e={},t=i(n,["response"]);t!=null&&o(e,["response"],Go(s,t));let r=i(n,["description"]);r!=null&&o(e,["description"],r);let l=i(n,["name"]);l!=null&&o(e,["name"],l);let u=i(n,["parameters"]);return u!=null&&o(e,["parameters"],u),e}function Ho(){return{}}function Bo(){return{}}function $o(s,n){let e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);let r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function Ko(s,n){let e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);let r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function Yo(s,n){let e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],$o(s,t)),e}function Wo(s,n){let e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],Ko(s,t)),e}function Jo(s,n){let e={},t=i(n,["functionDeclarations"]);if(t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(a=>qo(s,a))):o(e,["functionDeclarations"],t)),i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&o(e,["googleSearch"],Ho());let l=i(n,["googleSearchRetrieval"]);l!=null&&o(e,["googleSearchRetrieval"],Yo(s,l));let u=i(n,["codeExecution"]);return u!=null&&o(e,["codeExecution"],u),e}function Oo(s,n){let e={},t=i(n,["functionDeclarations"]);t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(c=>zo(s,c))):o(e,["functionDeclarations"],t));let r=i(n,["retrieval"]);r!=null&&o(e,["retrieval"],r),i(n,["googleSearch"])!=null&&o(e,["googleSearch"],Bo());let u=i(n,["googleSearchRetrieval"]);u!=null&&o(e,["googleSearchRetrieval"],Wo(s,u));let a=i(n,["codeExecution"]);return a!=null&&o(e,["codeExecution"],a),e}function Qo(s,n){let e={},t=i(n,["handle"]);if(t!=null&&o(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Xo(s,n){let e={},t=i(n,["handle"]);t!=null&&o(e,["handle"],t);let r=i(n,["transparent"]);return r!=null&&o(e,["transparent"],r),e}function Zo(){return{}}function tt(){return{}}function bo(s,n){let e={},t=i(n,["disabled"]);t!=null&&o(e,["disabled"],t);let r=i(n,["startOfSpeechSensitivity"]);r!=null&&o(e,["startOfSpeechSensitivity"],r);let l=i(n,["endOfSpeechSensitivity"]);l!=null&&o(e,["endOfSpeechSensitivity"],l);let u=i(n,["prefixPaddingMs"]);u!=null&&o(e,["prefixPaddingMs"],u);let a=i(n,["silenceDurationMs"]);return a!=null&&o(e,["silenceDurationMs"],a),e}function jo(s,n){let e={},t=i(n,["disabled"]);t!=null&&o(e,["disabled"],t);let r=i(n,["startOfSpeechSensitivity"]);r!=null&&o(e,["startOfSpeechSensitivity"],r);let l=i(n,["endOfSpeechSensitivity"]);l!=null&&o(e,["endOfSpeechSensitivity"],l);let u=i(n,["prefixPaddingMs"]);u!=null&&o(e,["prefixPaddingMs"],u);let a=i(n,["silenceDurationMs"]);return a!=null&&o(e,["silenceDurationMs"],a),e}function ei(s,n){let e={},t=i(n,["automaticActivityDetection"]);t!=null&&o(e,["automaticActivityDetection"],bo(s,t));let r=i(n,["activityHandling"]);r!=null&&o(e,["activityHandling"],r);let l=i(n,["turnCoverage"]);return l!=null&&o(e,["turnCoverage"],l),e}function ni(s,n){let e={},t=i(n,["automaticActivityDetection"]);t!=null&&o(e,["automaticActivityDetection"],jo(s,t));let r=i(n,["activityHandling"]);r!=null&&o(e,["activityHandling"],r);let l=i(n,["turnCoverage"]);return l!=null&&o(e,["turnCoverage"],l),e}function ti(s,n){let e={},t=i(n,["targetTokens"]);return t!=null&&o(e,["targetTokens"],t),e}function oi(s,n){let e={},t=i(n,["targetTokens"]);return t!=null&&o(e,["targetTokens"],t),e}function ii(s,n){let e={},t=i(n,["triggerTokens"]);t!=null&&o(e,["triggerTokens"],t);let r=i(n,["slidingWindow"]);return r!=null&&o(e,["slidingWindow"],ti(s,r)),e}function ri(s,n){let e={},t=i(n,["triggerTokens"]);t!=null&&o(e,["triggerTokens"],t);let r=i(n,["slidingWindow"]);return r!=null&&o(e,["slidingWindow"],oi(s,r)),e}function si(s,n,e){let t={},r=i(n,["generationConfig"]);e!==void 0&&r!=null&&o(e,["setup","generationConfig"],r);let l=i(n,["responseModalities"]);e!==void 0&&l!=null&&o(e,["setup","generationConfig","responseModalities"],l);let u=i(n,["temperature"]);e!==void 0&&u!=null&&o(e,["setup","generationConfig","temperature"],u);let a=i(n,["topP"]);e!==void 0&&a!=null&&o(e,["setup","generationConfig","topP"],a);let c=i(n,["topK"]);e!==void 0&&c!=null&&o(e,["setup","generationConfig","topK"],c);let f=i(n,["maxOutputTokens"]);e!==void 0&&f!=null&&o(e,["setup","generationConfig","maxOutputTokens"],f);let d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&o(e,["setup","generationConfig","mediaResolution"],d);let p=i(n,["seed"]);e!==void 0&&p!=null&&o(e,["setup","generationConfig","seed"],p);let h=i(n,["speechConfig"]);e!==void 0&&h!=null&&o(e,["setup","generationConfig","speechConfig"],h);let m=i(n,["systemInstruction"]);e!==void 0&&m!=null&&o(e,["setup","systemInstruction"],Uo(s,z(s,m)));let g=i(n,["tools"]);e!==void 0&&g!=null&&(Array.isArray(g)?o(e,["setup","tools"],B(s,B(s,g).map(M=>Jo(s,Re(s,M))))):o(e,["setup","tools"],B(s,g)));let T=i(n,["sessionResumption"]);if(e!==void 0&&T!=null&&o(e,["setup","sessionResumption"],Qo(s,T)),i(n,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");let E=i(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&o(e,["setup","outputAudioTranscription"],Zo());let v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&o(e,["setup","realtimeInputConfig"],ei(s,v));let x=i(n,["contextWindowCompression"]);return e!==void 0&&x!=null&&o(e,["setup","contextWindowCompression"],ii(s,x)),t}function li(s,n,e){let t={},r=i(n,["generationConfig"]);e!==void 0&&r!=null&&o(e,["setup","generationConfig"],r);let l=i(n,["responseModalities"]);e!==void 0&&l!=null&&o(e,["setup","generationConfig","responseModalities"],l);let u=i(n,["temperature"]);e!==void 0&&u!=null&&o(e,["setup","generationConfig","temperature"],u);let a=i(n,["topP"]);e!==void 0&&a!=null&&o(e,["setup","generationConfig","topP"],a);let c=i(n,["topK"]);e!==void 0&&c!=null&&o(e,["setup","generationConfig","topK"],c);let f=i(n,["maxOutputTokens"]);e!==void 0&&f!=null&&o(e,["setup","generationConfig","maxOutputTokens"],f);let d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&o(e,["setup","generationConfig","mediaResolution"],d);let p=i(n,["seed"]);e!==void 0&&p!=null&&o(e,["setup","generationConfig","seed"],p);let h=i(n,["speechConfig"]);e!==void 0&&h!=null&&o(e,["setup","generationConfig","speechConfig"],h);let m=i(n,["systemInstruction"]);e!==void 0&&m!=null&&o(e,["setup","systemInstruction"],ko(s,z(s,m)));let g=i(n,["tools"]);e!==void 0&&g!=null&&(Array.isArray(g)?o(e,["setup","tools"],B(s,B(s,g).map(P=>Oo(s,Re(s,P))))):o(e,["setup","tools"],B(s,g)));let T=i(n,["sessionResumption"]);e!==void 0&&T!=null&&o(e,["setup","sessionResumption"],Xo(s,T));let E=i(n,["inputAudioTranscription"]);e!==void 0&&E!=null&&o(e,["setup","inputAudioTranscription"],tt());let v=i(n,["outputAudioTranscription"]);e!==void 0&&v!=null&&o(e,["setup","outputAudioTranscription"],tt());let x=i(n,["realtimeInputConfig"]);e!==void 0&&x!=null&&o(e,["setup","realtimeInputConfig"],ni(s,x));let M=i(n,["contextWindowCompression"]);return e!==void 0&&M!=null&&o(e,["setup","contextWindowCompression"],ri(s,M)),t}function ai(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["setup","model"],L(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],si(s,r,e)),e}function ui(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["setup","model"],L(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],li(s,r,e)),e}function ci(){return{}}function fi(){return{}}function di(s,n){let e={},t=i(n,["thought"]);t!=null&&o(e,["thought"],t);let r=i(n,["codeExecutionResult"]);r!=null&&o(e,["codeExecutionResult"],r);let l=i(n,["executableCode"]);l!=null&&o(e,["executableCode"],l);let u=i(n,["fileData"]);u!=null&&o(e,["fileData"],u);let a=i(n,["functionCall"]);a!=null&&o(e,["functionCall"],a);let c=i(n,["functionResponse"]);c!=null&&o(e,["functionResponse"],c);let f=i(n,["inlineData"]);f!=null&&o(e,["inlineData"],f);let d=i(n,["text"]);return d!=null&&o(e,["text"],d),e}function pi(s,n){let e={},t=i(n,["videoMetadata"]);t!=null&&o(e,["videoMetadata"],t);let r=i(n,["thought"]);r!=null&&o(e,["thought"],r);let l=i(n,["codeExecutionResult"]);l!=null&&o(e,["codeExecutionResult"],l);let u=i(n,["executableCode"]);u!=null&&o(e,["executableCode"],u);let a=i(n,["fileData"]);a!=null&&o(e,["fileData"],a);let c=i(n,["functionCall"]);c!=null&&o(e,["functionCall"],c);let f=i(n,["functionResponse"]);f!=null&&o(e,["functionResponse"],f);let d=i(n,["inlineData"]);d!=null&&o(e,["inlineData"],d);let p=i(n,["text"]);return p!=null&&o(e,["text"],p),e}function mi(s,n){let e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>di(s,l))):o(e,["parts"],t));let r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function hi(s,n){let e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>pi(s,l))):o(e,["parts"],t));let r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function ot(s,n){let e={},t=i(n,["text"]);t!=null&&o(e,["text"],t);let r=i(n,["finished"]);return r!=null&&o(e,["finished"],r),e}function it(s,n){let e={},t=i(n,["text"]);t!=null&&o(e,["text"],t);let r=i(n,["finished"]);return r!=null&&o(e,["finished"],r),e}function gi(s,n){let e={},t=i(n,["modelTurn"]);t!=null&&o(e,["modelTurn"],mi(s,t));let r=i(n,["turnComplete"]);r!=null&&o(e,["turnComplete"],r);let l=i(n,["interrupted"]);l!=null&&o(e,["interrupted"],l);let u=i(n,["generationComplete"]);u!=null&&o(e,["generationComplete"],u);let a=i(n,["inputTranscription"]);a!=null&&o(e,["inputTranscription"],ot(s,a));let c=i(n,["outputTranscription"]);return c!=null&&o(e,["outputTranscription"],ot(s,c)),e}function Ci(s,n){let e={},t=i(n,["modelTurn"]);t!=null&&o(e,["modelTurn"],hi(s,t));let r=i(n,["turnComplete"]);r!=null&&o(e,["turnComplete"],r);let l=i(n,["interrupted"]);l!=null&&o(e,["interrupted"],l);let u=i(n,["generationComplete"]);u!=null&&o(e,["generationComplete"],u);let a=i(n,["inputTranscription"]);a!=null&&o(e,["inputTranscription"],it(s,a));let c=i(n,["outputTranscription"]);return c!=null&&o(e,["outputTranscription"],it(s,c)),e}function yi(s,n){let e={},t=i(n,["id"]);t!=null&&o(e,["id"],t);let r=i(n,["args"]);r!=null&&o(e,["args"],r);let l=i(n,["name"]);return l!=null&&o(e,["name"],l),e}function Ti(s,n){let e={},t=i(n,["args"]);t!=null&&o(e,["args"],t);let r=i(n,["name"]);return r!=null&&o(e,["name"],r),e}function Ei(s,n){let e={},t=i(n,["functionCalls"]);return t!=null&&(Array.isArray(t)?o(e,["functionCalls"],t.map(r=>yi(s,r))):o(e,["functionCalls"],t)),e}function _i(s,n){let e={},t=i(n,["functionCalls"]);return t!=null&&(Array.isArray(t)?o(e,["functionCalls"],t.map(r=>Ti(s,r))):o(e,["functionCalls"],t)),e}function vi(s,n){let e={},t=i(n,["ids"]);return t!=null&&o(e,["ids"],t),e}function Ii(s,n){let e={},t=i(n,["ids"]);return t!=null&&o(e,["ids"],t),e}function ge(s,n){let e={},t=i(n,["modality"]);t!=null&&o(e,["modality"],t);let r=i(n,["tokenCount"]);return r!=null&&o(e,["tokenCount"],r),e}function Ce(s,n){let e={},t=i(n,["modality"]);t!=null&&o(e,["modality"],t);let r=i(n,["tokenCount"]);return r!=null&&o(e,["tokenCount"],r),e}function xi(s,n){let e={},t=i(n,["promptTokenCount"]);t!=null&&o(e,["promptTokenCount"],t);let r=i(n,["cachedContentTokenCount"]);r!=null&&o(e,["cachedContentTokenCount"],r);let l=i(n,["responseTokenCount"]);l!=null&&o(e,["responseTokenCount"],l);let u=i(n,["toolUsePromptTokenCount"]);u!=null&&o(e,["toolUsePromptTokenCount"],u);let a=i(n,["thoughtsTokenCount"]);a!=null&&o(e,["thoughtsTokenCount"],a);let c=i(n,["totalTokenCount"]);c!=null&&o(e,["totalTokenCount"],c);let f=i(n,["promptTokensDetails"]);f!=null&&(Array.isArray(f)?o(e,["promptTokensDetails"],f.map(m=>ge(s,m))):o(e,["promptTokensDetails"],f));let d=i(n,["cacheTokensDetails"]);d!=null&&(Array.isArray(d)?o(e,["cacheTokensDetails"],d.map(m=>ge(s,m))):o(e,["cacheTokensDetails"],d));let p=i(n,["responseTokensDetails"]);p!=null&&(Array.isArray(p)?o(e,["responseTokensDetails"],p.map(m=>ge(s,m))):o(e,["responseTokensDetails"],p));let h=i(n,["toolUsePromptTokensDetails"]);return h!=null&&(Array.isArray(h)?o(e,["toolUsePromptTokensDetails"],h.map(m=>ge(s,m))):o(e,["toolUsePromptTokensDetails"],h)),e}function Si(s,n){let e={},t=i(n,["promptTokenCount"]);t!=null&&o(e,["promptTokenCount"],t);let r=i(n,["cachedContentTokenCount"]);r!=null&&o(e,["cachedContentTokenCount"],r);let l=i(n,["candidatesTokenCount"]);l!=null&&o(e,["responseTokenCount"],l);let u=i(n,["toolUsePromptTokenCount"]);u!=null&&o(e,["toolUsePromptTokenCount"],u);let a=i(n,["thoughtsTokenCount"]);a!=null&&o(e,["thoughtsTokenCount"],a);let c=i(n,["totalTokenCount"]);c!=null&&o(e,["totalTokenCount"],c);let f=i(n,["promptTokensDetails"]);f!=null&&(Array.isArray(f)?o(e,["promptTokensDetails"],f.map(g=>Ce(s,g))):o(e,["promptTokensDetails"],f));let d=i(n,["cacheTokensDetails"]);d!=null&&(Array.isArray(d)?o(e,["cacheTokensDetails"],d.map(g=>Ce(s,g))):o(e,["cacheTokensDetails"],d));let p=i(n,["candidatesTokensDetails"]);p!=null&&(Array.isArray(p)?o(e,["responseTokensDetails"],p.map(g=>Ce(s,g))):o(e,["responseTokensDetails"],p));let h=i(n,["toolUsePromptTokensDetails"]);h!=null&&(Array.isArray(h)?o(e,["toolUsePromptTokensDetails"],h.map(g=>Ce(s,g))):o(e,["toolUsePromptTokensDetails"],h));let m=i(n,["trafficType"]);return m!=null&&o(e,["trafficType"],m),e}function Ai(s,n){let e={},t=i(n,["timeLeft"]);return t!=null&&o(e,["timeLeft"],t),e}function Pi(s,n){let e={},t=i(n,["timeLeft"]);return t!=null&&o(e,["timeLeft"],t),e}function Mi(s,n){let e={},t=i(n,["newHandle"]);t!=null&&o(e,["newHandle"],t);let r=i(n,["resumable"]);r!=null&&o(e,["resumable"],r);let l=i(n,["lastConsumedClientMessageIndex"]);return l!=null&&o(e,["lastConsumedClientMessageIndex"],l),e}function Di(s,n){let e={},t=i(n,["newHandle"]);t!=null&&o(e,["newHandle"],t);let r=i(n,["resumable"]);r!=null&&o(e,["resumable"],r);let l=i(n,["lastConsumedClientMessageIndex"]);return l!=null&&o(e,["lastConsumedClientMessageIndex"],l),e}function Ri(s,n){let e={};i(n,["setupComplete"])!=null&&o(e,["setupComplete"],ci());let r=i(n,["serverContent"]);r!=null&&o(e,["serverContent"],gi(s,r));let l=i(n,["toolCall"]);l!=null&&o(e,["toolCall"],Ei(s,l));let u=i(n,["toolCallCancellation"]);u!=null&&o(e,["toolCallCancellation"],vi(s,u));let a=i(n,["usageMetadata"]);a!=null&&o(e,["usageMetadata"],xi(s,a));let c=i(n,["goAway"]);c!=null&&o(e,["goAway"],Ai(s,c));let f=i(n,["sessionResumptionUpdate"]);return f!=null&&o(e,["sessionResumptionUpdate"],Mi(s,f)),e}function wi(s,n){let e={};i(n,["setupComplete"])!=null&&o(e,["setupComplete"],fi());let r=i(n,["serverContent"]);r!=null&&o(e,["serverContent"],Ci(s,r));let l=i(n,["toolCall"]);l!=null&&o(e,["toolCall"],_i(s,l));let u=i(n,["toolCallCancellation"]);u!=null&&o(e,["toolCallCancellation"],Ii(s,u));let a=i(n,["usageMetadata"]);a!=null&&o(e,["usageMetadata"],Si(s,a));let c=i(n,["goAway"]);c!=null&&o(e,["goAway"],Pi(s,c));let f=i(n,["sessionResumptionUpdate"]);return f!=null&&o(e,["sessionResumptionUpdate"],Di(s,f)),e}function Ni(s,n){let e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");let t=i(n,["thought"]);t!=null&&o(e,["thought"],t);let r=i(n,["codeExecutionResult"]);r!=null&&o(e,["codeExecutionResult"],r);let l=i(n,["executableCode"]);l!=null&&o(e,["executableCode"],l);let u=i(n,["fileData"]);u!=null&&o(e,["fileData"],u);let a=i(n,["functionCall"]);a!=null&&o(e,["functionCall"],a);let c=i(n,["functionResponse"]);c!=null&&o(e,["functionResponse"],c);let f=i(n,["inlineData"]);f!=null&&o(e,["inlineData"],f);let d=i(n,["text"]);return d!=null&&o(e,["text"],d),e}function we(s,n){let e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Ni(s,l))):o(e,["parts"],t));let r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Vi(s,n){let e={};if(i(n,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(i(n,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(i(n,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(i(n,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(i(n,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(i(n,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(i(n,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");let t=i(n,["anyOf"]);t!=null&&o(e,["anyOf"],t);let r=i(n,["description"]);r!=null&&o(e,["description"],r);let l=i(n,["enum"]);l!=null&&o(e,["enum"],l);let u=i(n,["format"]);u!=null&&o(e,["format"],u);let a=i(n,["items"]);a!=null&&o(e,["items"],a);let c=i(n,["maxItems"]);c!=null&&o(e,["maxItems"],c);let f=i(n,["maximum"]);f!=null&&o(e,["maximum"],f);let d=i(n,["minItems"]);d!=null&&o(e,["minItems"],d);let p=i(n,["minimum"]);p!=null&&o(e,["minimum"],p);let h=i(n,["nullable"]);h!=null&&o(e,["nullable"],h);let m=i(n,["properties"]);m!=null&&o(e,["properties"],m);let g=i(n,["propertyOrdering"]);g!=null&&o(e,["propertyOrdering"],g);let T=i(n,["required"]);T!=null&&o(e,["required"],T);let E=i(n,["title"]);E!=null&&o(e,["title"],E);let v=i(n,["type"]);return v!=null&&o(e,["type"],v),e}function Fi(s,n){let e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let t=i(n,["category"]);t!=null&&o(e,["category"],t);let r=i(n,["threshold"]);return r!=null&&o(e,["threshold"],r),e}function Li(s,n){let e={};if(i(n,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");let t=i(n,["description"]);t!=null&&o(e,["description"],t);let r=i(n,["name"]);r!=null&&o(e,["name"],r);let l=i(n,["parameters"]);return l!=null&&o(e,["parameters"],l),e}function Ui(){return{}}function ki(s,n){let e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);let r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function Gi(s,n){let e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],ki(s,t)),e}function qi(s,n){let e={},t=i(n,["functionDeclarations"]);if(t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(a=>Li(s,a))):o(e,["functionDeclarations"],t)),i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&o(e,["googleSearch"],Ui());let l=i(n,["googleSearchRetrieval"]);l!=null&&o(e,["googleSearchRetrieval"],Gi(s,l));let u=i(n,["codeExecution"]);return u!=null&&o(e,["codeExecution"],u),e}function zi(s,n){let e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);let r=i(n,["allowedFunctionNames"]);return r!=null&&o(e,["allowedFunctionNames"],r),e}function Hi(s,n){let e={},t=i(n,["functionCallingConfig"]);return t!=null&&o(e,["functionCallingConfig"],zi(s,t)),e}function Bi(s,n){let e={},t=i(n,["voiceName"]);return t!=null&&o(e,["voiceName"],t),e}function $i(s,n){let e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&o(e,["prebuiltVoiceConfig"],Bi(s,t)),e}function Ki(s,n){let e={},t=i(n,["voiceConfig"]);t!=null&&o(e,["voiceConfig"],$i(s,t));let r=i(n,["languageCode"]);return r!=null&&o(e,["languageCode"],r),e}function Yi(s,n){let e={},t=i(n,["includeThoughts"]);t!=null&&o(e,["includeThoughts"],t);let r=i(n,["thinkingBudget"]);return r!=null&&o(e,["thinkingBudget"],r),e}function Wi(s,n,e){let t={},r=i(n,["systemInstruction"]);e!==void 0&&r!=null&&o(e,["systemInstruction"],we(s,z(s,r)));let l=i(n,["temperature"]);l!=null&&o(t,["temperature"],l);let u=i(n,["topP"]);u!=null&&o(t,["topP"],u);let a=i(n,["topK"]);a!=null&&o(t,["topK"],a);let c=i(n,["candidateCount"]);c!=null&&o(t,["candidateCount"],c);let f=i(n,["maxOutputTokens"]);f!=null&&o(t,["maxOutputTokens"],f);let d=i(n,["stopSequences"]);d!=null&&o(t,["stopSequences"],d);let p=i(n,["responseLogprobs"]);p!=null&&o(t,["responseLogprobs"],p);let h=i(n,["logprobs"]);h!=null&&o(t,["logprobs"],h);let m=i(n,["presencePenalty"]);m!=null&&o(t,["presencePenalty"],m);let g=i(n,["frequencyPenalty"]);g!=null&&o(t,["frequencyPenalty"],g);let T=i(n,["seed"]);T!=null&&o(t,["seed"],T);let E=i(n,["responseMimeType"]);E!=null&&o(t,["responseMimeType"],E);let v=i(n,["responseSchema"]);if(v!=null&&o(t,["responseSchema"],Vi(s,gt(s,v))),i(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let x=i(n,["safetySettings"]);e!==void 0&&x!=null&&(Array.isArray(x)?o(e,["safetySettings"],x.map(X=>Fi(s,X))):o(e,["safetySettings"],x));let M=i(n,["tools"]);e!==void 0&&M!=null&&(Array.isArray(M)?o(e,["tools"],B(s,B(s,M).map(X=>qi(s,Re(s,X))))):o(e,["tools"],B(s,M)));let P=i(n,["toolConfig"]);if(e!==void 0&&P!=null&&o(e,["toolConfig"],Hi(s,P)),i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let w=i(n,["cachedContent"]);e!==void 0&&w!=null&&o(e,["cachedContent"],W(s,w));let k=i(n,["responseModalities"]);k!=null&&o(t,["responseModalities"],k);let G=i(n,["mediaResolution"]);G!=null&&o(t,["mediaResolution"],G);let q=i(n,["speechConfig"]);if(q!=null&&o(t,["speechConfig"],Ki(s,Ct(s,q))),i(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let te=i(n,["thinkingConfig"]);return te!=null&&o(t,["thinkingConfig"],Yi(s,te)),t}function rt(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["contents"]);r!=null&&(Array.isArray(r)?o(e,["contents"],R(s,R(s,r).map(u=>we(s,u)))):o(e,["contents"],R(s,r)));let l=i(n,["config"]);return l!=null&&o(e,["generationConfig"],Wi(s,l,e)),e}function Ji(s,n,e){let t={},r=i(n,["taskType"]);e!==void 0&&r!=null&&o(e,["requests[]","taskType"],r);let l=i(n,["title"]);e!==void 0&&l!=null&&o(e,["requests[]","title"],l);let u=i(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&o(e,["requests[]","outputDimensionality"],u),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Oi(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["contents"]);r!=null&&o(e,["requests[]","content"],ht(s,r));let l=i(n,["config"]);l!=null&&o(e,["config"],Ji(s,l,e));let u=i(n,["model"]);return u!==void 0&&o(e,["requests[]","model"],L(s,u)),e}function Qi(s,n,e){let t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let r=i(n,["numberOfImages"]);e!==void 0&&r!=null&&o(e,["parameters","sampleCount"],r);let l=i(n,["aspectRatio"]);e!==void 0&&l!=null&&o(e,["parameters","aspectRatio"],l);let u=i(n,["guidanceScale"]);if(e!==void 0&&u!=null&&o(e,["parameters","guidanceScale"],u),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=i(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&o(e,["parameters","safetySetting"],a);let c=i(n,["personGeneration"]);e!==void 0&&c!=null&&o(e,["parameters","personGeneration"],c);let f=i(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&o(e,["parameters","includeSafetyAttributes"],f);let d=i(n,["includeRaiReason"]);e!==void 0&&d!=null&&o(e,["parameters","includeRaiReason"],d);let p=i(n,["language"]);e!==void 0&&p!=null&&o(e,["parameters","language"],p);let h=i(n,["outputMimeType"]);e!==void 0&&h!=null&&o(e,["parameters","outputOptions","mimeType"],h);let m=i(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&o(e,["parameters","outputOptions","compressionQuality"],m),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Xi(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["prompt"]);r!=null&&o(e,["instances[0]","prompt"],r);let l=i(n,["config"]);return l!=null&&o(e,["config"],Qi(s,l,e)),e}function Zi(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","name"],L(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function bi(s,n){let e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function ji(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["contents"]);r!=null&&(Array.isArray(r)?o(e,["contents"],R(s,R(s,r).map(u=>we(s,u)))):o(e,["contents"],R(s,r)));let l=i(n,["config"]);return l!=null&&o(e,["config"],bi(s,l)),e}function er(s,n){let e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let t=i(n,["imageBytes"]);t!=null&&o(e,["bytesBase64Encoded"],J(s,t));let r=i(n,["mimeType"]);return r!=null&&o(e,["mimeType"],r),e}function nr(s,n,e){let t={},r=i(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&o(e,["parameters","sampleCount"],r),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let l=i(n,["durationSeconds"]);if(e!==void 0&&l!=null&&o(e,["parameters","durationSeconds"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let u=i(n,["aspectRatio"]);if(e!==void 0&&u!=null&&o(e,["parameters","aspectRatio"],u),i(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");let a=i(n,["personGeneration"]);if(e!==void 0&&a!=null&&o(e,["parameters","personGeneration"],a),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let c=i(n,["negativePrompt"]);if(e!==void 0&&c!=null&&o(e,["parameters","negativePrompt"],c),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function tr(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["prompt"]);r!=null&&o(e,["instances[0]","prompt"],r);let l=i(n,["image"]);l!=null&&o(e,["instances[0]","image"],er(s,l));let u=i(n,["config"]);return u!=null&&o(e,["config"],nr(s,u,e)),e}function or(s,n){let e={},t=i(n,["videoMetadata"]);t!=null&&o(e,["videoMetadata"],t);let r=i(n,["thought"]);r!=null&&o(e,["thought"],r);let l=i(n,["codeExecutionResult"]);l!=null&&o(e,["codeExecutionResult"],l);let u=i(n,["executableCode"]);u!=null&&o(e,["executableCode"],u);let a=i(n,["fileData"]);a!=null&&o(e,["fileData"],a);let c=i(n,["functionCall"]);c!=null&&o(e,["functionCall"],c);let f=i(n,["functionResponse"]);f!=null&&o(e,["functionResponse"],f);let d=i(n,["inlineData"]);d!=null&&o(e,["inlineData"],d);let p=i(n,["text"]);return p!=null&&o(e,["text"],p),e}function ee(s,n){let e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>or(s,l))):o(e,["parts"],t));let r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Et(s,n){let e={},t=i(n,["example"]);t!=null&&o(e,["example"],t);let r=i(n,["pattern"]);r!=null&&o(e,["pattern"],r);let l=i(n,["default"]);l!=null&&o(e,["default"],l);let u=i(n,["maxLength"]);u!=null&&o(e,["maxLength"],u);let a=i(n,["minLength"]);a!=null&&o(e,["minLength"],a);let c=i(n,["minProperties"]);c!=null&&o(e,["minProperties"],c);let f=i(n,["maxProperties"]);f!=null&&o(e,["maxProperties"],f);let d=i(n,["anyOf"]);d!=null&&o(e,["anyOf"],d);let p=i(n,["description"]);p!=null&&o(e,["description"],p);let h=i(n,["enum"]);h!=null&&o(e,["enum"],h);let m=i(n,["format"]);m!=null&&o(e,["format"],m);let g=i(n,["items"]);g!=null&&o(e,["items"],g);let T=i(n,["maxItems"]);T!=null&&o(e,["maxItems"],T);let E=i(n,["maximum"]);E!=null&&o(e,["maximum"],E);let v=i(n,["minItems"]);v!=null&&o(e,["minItems"],v);let x=i(n,["minimum"]);x!=null&&o(e,["minimum"],x);let M=i(n,["nullable"]);M!=null&&o(e,["nullable"],M);let P=i(n,["properties"]);P!=null&&o(e,["properties"],P);let w=i(n,["propertyOrdering"]);w!=null&&o(e,["propertyOrdering"],w);let k=i(n,["required"]);k!=null&&o(e,["required"],k);let G=i(n,["title"]);G!=null&&o(e,["title"],G);let q=i(n,["type"]);return q!=null&&o(e,["type"],q),e}function ir(s,n){let e={},t=i(n,["featureSelectionPreference"]);return t!=null&&o(e,["featureSelectionPreference"],t),e}function rr(s,n){let e={},t=i(n,["method"]);t!=null&&o(e,["method"],t);let r=i(n,["category"]);r!=null&&o(e,["category"],r);let l=i(n,["threshold"]);return l!=null&&o(e,["threshold"],l),e}function sr(s,n){let e={},t=i(n,["response"]);t!=null&&o(e,["response"],Et(s,t));let r=i(n,["description"]);r!=null&&o(e,["description"],r);let l=i(n,["name"]);l!=null&&o(e,["name"],l);let u=i(n,["parameters"]);return u!=null&&o(e,["parameters"],u),e}function lr(){return{}}function ar(s,n){let e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);let r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function ur(s,n){let e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],ar(s,t)),e}function _t(s,n){let e={},t=i(n,["functionDeclarations"]);t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(c=>sr(s,c))):o(e,["functionDeclarations"],t));let r=i(n,["retrieval"]);r!=null&&o(e,["retrieval"],r),i(n,["googleSearch"])!=null&&o(e,["googleSearch"],lr());let u=i(n,["googleSearchRetrieval"]);u!=null&&o(e,["googleSearchRetrieval"],ur(s,u));let a=i(n,["codeExecution"]);return a!=null&&o(e,["codeExecution"],a),e}function cr(s,n){let e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);let r=i(n,["allowedFunctionNames"]);return r!=null&&o(e,["allowedFunctionNames"],r),e}function fr(s,n){let e={},t=i(n,["functionCallingConfig"]);return t!=null&&o(e,["functionCallingConfig"],cr(s,t)),e}function dr(s,n){let e={},t=i(n,["voiceName"]);return t!=null&&o(e,["voiceName"],t),e}function pr(s,n){let e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&o(e,["prebuiltVoiceConfig"],dr(s,t)),e}function mr(s,n){let e={},t=i(n,["voiceConfig"]);t!=null&&o(e,["voiceConfig"],pr(s,t));let r=i(n,["languageCode"]);return r!=null&&o(e,["languageCode"],r),e}function hr(s,n){let e={},t=i(n,["includeThoughts"]);t!=null&&o(e,["includeThoughts"],t);let r=i(n,["thinkingBudget"]);return r!=null&&o(e,["thinkingBudget"],r),e}function gr(s,n,e){let t={},r=i(n,["systemInstruction"]);e!==void 0&&r!=null&&o(e,["systemInstruction"],ee(s,z(s,r)));let l=i(n,["temperature"]);l!=null&&o(t,["temperature"],l);let u=i(n,["topP"]);u!=null&&o(t,["topP"],u);let a=i(n,["topK"]);a!=null&&o(t,["topK"],a);let c=i(n,["candidateCount"]);c!=null&&o(t,["candidateCount"],c);let f=i(n,["maxOutputTokens"]);f!=null&&o(t,["maxOutputTokens"],f);let d=i(n,["stopSequences"]);d!=null&&o(t,["stopSequences"],d);let p=i(n,["responseLogprobs"]);p!=null&&o(t,["responseLogprobs"],p);let h=i(n,["logprobs"]);h!=null&&o(t,["logprobs"],h);let m=i(n,["presencePenalty"]);m!=null&&o(t,["presencePenalty"],m);let g=i(n,["frequencyPenalty"]);g!=null&&o(t,["frequencyPenalty"],g);let T=i(n,["seed"]);T!=null&&o(t,["seed"],T);let E=i(n,["responseMimeType"]);E!=null&&o(t,["responseMimeType"],E);let v=i(n,["responseSchema"]);v!=null&&o(t,["responseSchema"],Et(s,gt(s,v)));let x=i(n,["routingConfig"]);x!=null&&o(t,["routingConfig"],x);let M=i(n,["modelSelectionConfig"]);M!=null&&o(t,["modelConfig"],ir(s,M));let P=i(n,["safetySettings"]);e!==void 0&&P!=null&&(Array.isArray(P)?o(e,["safetySettings"],P.map(Fe=>rr(s,Fe))):o(e,["safetySettings"],P));let w=i(n,["tools"]);e!==void 0&&w!=null&&(Array.isArray(w)?o(e,["tools"],B(s,B(s,w).map(Fe=>_t(s,Re(s,Fe))))):o(e,["tools"],B(s,w)));let k=i(n,["toolConfig"]);e!==void 0&&k!=null&&o(e,["toolConfig"],fr(s,k));let G=i(n,["labels"]);e!==void 0&&G!=null&&o(e,["labels"],G);let q=i(n,["cachedContent"]);e!==void 0&&q!=null&&o(e,["cachedContent"],W(s,q));let te=i(n,["responseModalities"]);te!=null&&o(t,["responseModalities"],te);let X=i(n,["mediaResolution"]);X!=null&&o(t,["mediaResolution"],X);let dn=i(n,["speechConfig"]);dn!=null&&o(t,["speechConfig"],mr(s,Ct(s,dn)));let pn=i(n,["audioTimestamp"]);pn!=null&&o(t,["audioTimestamp"],pn);let mn=i(n,["thinkingConfig"]);return mn!=null&&o(t,["thinkingConfig"],hr(s,mn)),t}function st(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["contents"]);r!=null&&(Array.isArray(r)?o(e,["contents"],R(s,R(s,r).map(u=>ee(s,u)))):o(e,["contents"],R(s,r)));let l=i(n,["config"]);return l!=null&&o(e,["generationConfig"],gr(s,l,e)),e}function Cr(s,n,e){let t={},r=i(n,["taskType"]);e!==void 0&&r!=null&&o(e,["instances[]","task_type"],r);let l=i(n,["title"]);e!==void 0&&l!=null&&o(e,["instances[]","title"],l);let u=i(n,["outputDimensionality"]);e!==void 0&&u!=null&&o(e,["parameters","outputDimensionality"],u);let a=i(n,["mimeType"]);e!==void 0&&a!=null&&o(e,["instances[]","mimeType"],a);let c=i(n,["autoTruncate"]);return e!==void 0&&c!=null&&o(e,["parameters","autoTruncate"],c),t}function yr(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["contents"]);r!=null&&o(e,["instances[]","content"],ht(s,r));let l=i(n,["config"]);return l!=null&&o(e,["config"],Cr(s,l,e)),e}function Tr(s,n,e){let t={},r=i(n,["outputGcsUri"]);e!==void 0&&r!=null&&o(e,["parameters","storageUri"],r);let l=i(n,["negativePrompt"]);e!==void 0&&l!=null&&o(e,["parameters","negativePrompt"],l);let u=i(n,["numberOfImages"]);e!==void 0&&u!=null&&o(e,["parameters","sampleCount"],u);let a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&o(e,["parameters","aspectRatio"],a);let c=i(n,["guidanceScale"]);e!==void 0&&c!=null&&o(e,["parameters","guidanceScale"],c);let f=i(n,["seed"]);e!==void 0&&f!=null&&o(e,["parameters","seed"],f);let d=i(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&o(e,["parameters","safetySetting"],d);let p=i(n,["personGeneration"]);e!==void 0&&p!=null&&o(e,["parameters","personGeneration"],p);let h=i(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&o(e,["parameters","includeSafetyAttributes"],h);let m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&o(e,["parameters","includeRaiReason"],m);let g=i(n,["language"]);e!==void 0&&g!=null&&o(e,["parameters","language"],g);let T=i(n,["outputMimeType"]);e!==void 0&&T!=null&&o(e,["parameters","outputOptions","mimeType"],T);let E=i(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&o(e,["parameters","outputOptions","compressionQuality"],E);let v=i(n,["addWatermark"]);e!==void 0&&v!=null&&o(e,["parameters","addWatermark"],v);let x=i(n,["enhancePrompt"]);return e!==void 0&&x!=null&&o(e,["parameters","enhancePrompt"],x),t}function Er(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["prompt"]);r!=null&&o(e,["instances[0]","prompt"],r);let l=i(n,["config"]);return l!=null&&o(e,["config"],Tr(s,l,e)),e}function _r(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","name"],L(s,t));let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function vr(s,n,e){let t={},r=i(n,["systemInstruction"]);e!==void 0&&r!=null&&o(e,["systemInstruction"],ee(s,z(s,r)));let l=i(n,["tools"]);e!==void 0&&l!=null&&(Array.isArray(l)?o(e,["tools"],l.map(a=>_t(s,a))):o(e,["tools"],l));let u=i(n,["generationConfig"]);return e!==void 0&&u!=null&&o(e,["generationConfig"],u),t}function Ir(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["contents"]);r!=null&&(Array.isArray(r)?o(e,["contents"],R(s,R(s,r).map(u=>ee(s,u)))):o(e,["contents"],R(s,r)));let l=i(n,["config"]);return l!=null&&o(e,["config"],vr(s,l,e)),e}function xr(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["contents"]);r!=null&&(Array.isArray(r)?o(e,["contents"],R(s,R(s,r).map(u=>ee(s,u)))):o(e,["contents"],R(s,r)));let l=i(n,["config"]);return l!=null&&o(e,["config"],l),e}function Sr(s,n){let e={},t=i(n,["gcsUri"]);t!=null&&o(e,["gcsUri"],t);let r=i(n,["imageBytes"]);r!=null&&o(e,["bytesBase64Encoded"],J(s,r));let l=i(n,["mimeType"]);return l!=null&&o(e,["mimeType"],l),e}function Ar(s,n,e){let t={},r=i(n,["numberOfVideos"]);e!==void 0&&r!=null&&o(e,["parameters","sampleCount"],r);let l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&o(e,["parameters","storageUri"],l);let u=i(n,["fps"]);e!==void 0&&u!=null&&o(e,["parameters","fps"],u);let a=i(n,["durationSeconds"]);e!==void 0&&a!=null&&o(e,["parameters","durationSeconds"],a);let c=i(n,["seed"]);e!==void 0&&c!=null&&o(e,["parameters","seed"],c);let f=i(n,["aspectRatio"]);e!==void 0&&f!=null&&o(e,["parameters","aspectRatio"],f);let d=i(n,["resolution"]);e!==void 0&&d!=null&&o(e,["parameters","resolution"],d);let p=i(n,["personGeneration"]);e!==void 0&&p!=null&&o(e,["parameters","personGeneration"],p);let h=i(n,["pubsubTopic"]);e!==void 0&&h!=null&&o(e,["parameters","pubsubTopic"],h);let m=i(n,["negativePrompt"]);e!==void 0&&m!=null&&o(e,["parameters","negativePrompt"],m);let g=i(n,["enhancePrompt"]);return e!==void 0&&g!=null&&o(e,["parameters","enhancePrompt"],g),t}function Pr(s,n){let e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],L(s,t));let r=i(n,["prompt"]);r!=null&&o(e,["instances[0]","prompt"],r);let l=i(n,["image"]);l!=null&&o(e,["instances[0]","image"],Sr(s,l));let u=i(n,["config"]);return u!=null&&o(e,["config"],Ar(s,u,e)),e}function Mr(s,n){let e={},t=i(n,["thought"]);t!=null&&o(e,["thought"],t);let r=i(n,["codeExecutionResult"]);r!=null&&o(e,["codeExecutionResult"],r);let l=i(n,["executableCode"]);l!=null&&o(e,["executableCode"],l);let u=i(n,["fileData"]);u!=null&&o(e,["fileData"],u);let a=i(n,["functionCall"]);a!=null&&o(e,["functionCall"],a);let c=i(n,["functionResponse"]);c!=null&&o(e,["functionResponse"],c);let f=i(n,["inlineData"]);f!=null&&o(e,["inlineData"],f);let d=i(n,["text"]);return d!=null&&o(e,["text"],d),e}function Dr(s,n){let e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Mr(s,l))):o(e,["parts"],t));let r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Rr(s,n){let e={},t=i(n,["citationSources"]);return t!=null&&o(e,["citations"],t),e}function wr(s,n){let e={},t=i(n,["content"]);t!=null&&o(e,["content"],Dr(s,t));let r=i(n,["citationMetadata"]);r!=null&&o(e,["citationMetadata"],Rr(s,r));let l=i(n,["tokenCount"]);l!=null&&o(e,["tokenCount"],l);let u=i(n,["finishReason"]);u!=null&&o(e,["finishReason"],u);let a=i(n,["avgLogprobs"]);a!=null&&o(e,["avgLogprobs"],a);let c=i(n,["groundingMetadata"]);c!=null&&o(e,["groundingMetadata"],c);let f=i(n,["index"]);f!=null&&o(e,["index"],f);let d=i(n,["logprobsResult"]);d!=null&&o(e,["logprobsResult"],d);let p=i(n,["safetyRatings"]);return p!=null&&o(e,["safetyRatings"],p),e}function lt(s,n){let e={},t=i(n,["candidates"]);t!=null&&(Array.isArray(t)?o(e,["candidates"],t.map(a=>wr(s,a))):o(e,["candidates"],t));let r=i(n,["modelVersion"]);r!=null&&o(e,["modelVersion"],r);let l=i(n,["promptFeedback"]);l!=null&&o(e,["promptFeedback"],l);let u=i(n,["usageMetadata"]);return u!=null&&o(e,["usageMetadata"],u),e}function Nr(s,n){let e={},t=i(n,["values"]);return t!=null&&o(e,["values"],t),e}function Vr(){return{}}function Fr(s,n){let e={},t=i(n,["embeddings"]);return t!=null&&(Array.isArray(t)?o(e,["embeddings"],t.map(l=>Nr(s,l))):o(e,["embeddings"],t)),i(n,["metadata"])!=null&&o(e,["metadata"],Vr()),e}function Lr(s,n){let e={},t=i(n,["bytesBase64Encoded"]);t!=null&&o(e,["imageBytes"],J(s,t));let r=i(n,["mimeType"]);return r!=null&&o(e,["mimeType"],r),e}function vt(s,n){let e={},t=i(n,["safetyAttributes","categories"]);t!=null&&o(e,["categories"],t);let r=i(n,["safetyAttributes","scores"]);r!=null&&o(e,["scores"],r);let l=i(n,["contentType"]);return l!=null&&o(e,["contentType"],l),e}function Ur(s,n){let e={},t=i(n,["_self"]);t!=null&&o(e,["image"],Lr(s,t));let r=i(n,["raiFilteredReason"]);r!=null&&o(e,["raiFilteredReason"],r);let l=i(n,["_self"]);return l!=null&&o(e,["safetyAttributes"],vt(s,l)),e}function kr(s,n){let e={},t=i(n,["predictions"]);t!=null&&(Array.isArray(t)?o(e,["generatedImages"],t.map(l=>Ur(s,l))):o(e,["generatedImages"],t));let r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&o(e,["positivePromptSafetyAttributes"],vt(s,r)),e}function Gr(s,n){let e={},t=i(n,["baseModel"]);t!=null&&o(e,["baseModel"],t);let r=i(n,["createTime"]);r!=null&&o(e,["createTime"],r);let l=i(n,["updateTime"]);return l!=null&&o(e,["updateTime"],l),e}function qr(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);let r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);let l=i(n,["description"]);l!=null&&o(e,["description"],l);let u=i(n,["version"]);u!=null&&o(e,["version"],u);let a=i(n,["_self"]);a!=null&&o(e,["tunedModelInfo"],Gr(s,a));let c=i(n,["inputTokenLimit"]);c!=null&&o(e,["inputTokenLimit"],c);let f=i(n,["outputTokenLimit"]);f!=null&&o(e,["outputTokenLimit"],f);let d=i(n,["supportedGenerationMethods"]);return d!=null&&o(e,["supportedActions"],d),e}function zr(s,n){let e={},t=i(n,["totalTokens"]);t!=null&&o(e,["totalTokens"],t);let r=i(n,["cachedContentTokenCount"]);return r!=null&&o(e,["cachedContentTokenCount"],r),e}function Hr(s,n){let e={},t=i(n,["video","uri"]);t!=null&&o(e,["uri"],t);let r=i(n,["video","encodedVideo"]);r!=null&&o(e,["videoBytes"],J(s,r));let l=i(n,["encoding"]);return l!=null&&o(e,["mimeType"],l),e}function Br(s,n){let e={},t=i(n,["_self"]);return t!=null&&o(e,["video"],Hr(s,t)),e}function $r(s,n){let e={},t=i(n,["generatedSamples"]);t!=null&&(Array.isArray(t)?o(e,["generatedVideos"],t.map(u=>Br(s,u))):o(e,["generatedVideos"],t));let r=i(n,["raiMediaFilteredCount"]);r!=null&&o(e,["raiMediaFilteredCount"],r);let l=i(n,["raiMediaFilteredReasons"]);return l!=null&&o(e,["raiMediaFilteredReasons"],l),e}function Kr(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);let r=i(n,["metadata"]);r!=null&&o(e,["metadata"],r);let l=i(n,["done"]);l!=null&&o(e,["done"],l);let u=i(n,["error"]);u!=null&&o(e,["error"],u);let a=i(n,["response","generateVideoResponse"]);return a!=null&&o(e,["response"],$r(s,a)),e}function Yr(s,n){let e={},t=i(n,["videoMetadata"]);t!=null&&o(e,["videoMetadata"],t);let r=i(n,["thought"]);r!=null&&o(e,["thought"],r);let l=i(n,["codeExecutionResult"]);l!=null&&o(e,["codeExecutionResult"],l);let u=i(n,["executableCode"]);u!=null&&o(e,["executableCode"],u);let a=i(n,["fileData"]);a!=null&&o(e,["fileData"],a);let c=i(n,["functionCall"]);c!=null&&o(e,["functionCall"],c);let f=i(n,["functionResponse"]);f!=null&&o(e,["functionResponse"],f);let d=i(n,["inlineData"]);d!=null&&o(e,["inlineData"],d);let p=i(n,["text"]);return p!=null&&o(e,["text"],p),e}function Wr(s,n){let e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Yr(s,l))):o(e,["parts"],t));let r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Jr(s,n){let e={},t=i(n,["citations"]);return t!=null&&o(e,["citations"],t),e}function Or(s,n){let e={},t=i(n,["content"]);t!=null&&o(e,["content"],Wr(s,t));let r=i(n,["citationMetadata"]);r!=null&&o(e,["citationMetadata"],Jr(s,r));let l=i(n,["finishMessage"]);l!=null&&o(e,["finishMessage"],l);let u=i(n,["finishReason"]);u!=null&&o(e,["finishReason"],u);let a=i(n,["avgLogprobs"]);a!=null&&o(e,["avgLogprobs"],a);let c=i(n,["groundingMetadata"]);c!=null&&o(e,["groundingMetadata"],c);let f=i(n,["index"]);f!=null&&o(e,["index"],f);let d=i(n,["logprobsResult"]);d!=null&&o(e,["logprobsResult"],d);let p=i(n,["safetyRatings"]);return p!=null&&o(e,["safetyRatings"],p),e}function at(s,n){let e={},t=i(n,["candidates"]);t!=null&&(Array.isArray(t)?o(e,["candidates"],t.map(f=>Or(s,f))):o(e,["candidates"],t));let r=i(n,["createTime"]);r!=null&&o(e,["createTime"],r);let l=i(n,["responseId"]);l!=null&&o(e,["responseId"],l);let u=i(n,["modelVersion"]);u!=null&&o(e,["modelVersion"],u);let a=i(n,["promptFeedback"]);a!=null&&o(e,["promptFeedback"],a);let c=i(n,["usageMetadata"]);return c!=null&&o(e,["usageMetadata"],c),e}function Qr(s,n){let e={},t=i(n,["truncated"]);t!=null&&o(e,["truncated"],t);let r=i(n,["token_count"]);return r!=null&&o(e,["tokenCount"],r),e}function Xr(s,n){let e={},t=i(n,["values"]);t!=null&&o(e,["values"],t);let r=i(n,["statistics"]);return r!=null&&o(e,["statistics"],Qr(s,r)),e}function Zr(s,n){let e={},t=i(n,["billableCharacterCount"]);return t!=null&&o(e,["billableCharacterCount"],t),e}function br(s,n){let e={},t=i(n,["predictions[]","embeddings"]);t!=null&&(Array.isArray(t)?o(e,["embeddings"],t.map(l=>Xr(s,l))):o(e,["embeddings"],t));let r=i(n,["metadata"]);return r!=null&&o(e,["metadata"],Zr(s,r)),e}function jr(s,n){let e={},t=i(n,["gcsUri"]);t!=null&&o(e,["gcsUri"],t);let r=i(n,["bytesBase64Encoded"]);r!=null&&o(e,["imageBytes"],J(s,r));let l=i(n,["mimeType"]);return l!=null&&o(e,["mimeType"],l),e}function It(s,n){let e={},t=i(n,["safetyAttributes","categories"]);t!=null&&o(e,["categories"],t);let r=i(n,["safetyAttributes","scores"]);r!=null&&o(e,["scores"],r);let l=i(n,["contentType"]);return l!=null&&o(e,["contentType"],l),e}function es(s,n){let e={},t=i(n,["_self"]);t!=null&&o(e,["image"],jr(s,t));let r=i(n,["raiFilteredReason"]);r!=null&&o(e,["raiFilteredReason"],r);let l=i(n,["_self"]);l!=null&&o(e,["safetyAttributes"],It(s,l));let u=i(n,["prompt"]);return u!=null&&o(e,["enhancedPrompt"],u),e}function ns(s,n){let e={},t=i(n,["predictions"]);t!=null&&(Array.isArray(t)?o(e,["generatedImages"],t.map(l=>es(s,l))):o(e,["generatedImages"],t));let r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&o(e,["positivePromptSafetyAttributes"],It(s,r)),e}function ts(s,n){let e={},t=i(n,["endpoint"]);t!=null&&o(e,["name"],t);let r=i(n,["deployedModelId"]);return r!=null&&o(e,["deployedModelId"],r),e}function os(s,n){let e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&o(e,["baseModel"],t);let r=i(n,["createTime"]);r!=null&&o(e,["createTime"],r);let l=i(n,["updateTime"]);return l!=null&&o(e,["updateTime"],l),e}function is(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);let r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);let l=i(n,["description"]);l!=null&&o(e,["description"],l);let u=i(n,["versionId"]);u!=null&&o(e,["version"],u);let a=i(n,["deployedModels"]);a!=null&&(Array.isArray(a)?o(e,["endpoints"],a.map(d=>ts(s,d))):o(e,["endpoints"],a));let c=i(n,["labels"]);c!=null&&o(e,["labels"],c);let f=i(n,["_self"]);return f!=null&&o(e,["tunedModelInfo"],os(s,f)),e}function rs(s,n){let e={},t=i(n,["totalTokens"]);return t!=null&&o(e,["totalTokens"],t),e}function ss(s,n){let e={},t=i(n,["tokensInfo"]);return t!=null&&o(e,["tokensInfo"],t),e}function ls(s,n){let e={},t=i(n,["gcsUri"]);t!=null&&o(e,["uri"],t);let r=i(n,["bytesBase64Encoded"]);r!=null&&o(e,["videoBytes"],J(s,r));let l=i(n,["mimeType"]);return l!=null&&o(e,["mimeType"],l),e}function as(s,n){let e={},t=i(n,["_self"]);return t!=null&&o(e,["video"],ls(s,t)),e}function us(s,n){let e={},t=i(n,["videos"]);t!=null&&(Array.isArray(t)?o(e,["generatedVideos"],t.map(u=>as(s,u))):o(e,["generatedVideos"],t));let r=i(n,["raiMediaFilteredCount"]);r!=null&&o(e,["raiMediaFilteredCount"],r);let l=i(n,["raiMediaFilteredReasons"]);return l!=null&&o(e,["raiMediaFilteredReasons"],l),e}function cs(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);let r=i(n,["metadata"]);r!=null&&o(e,["metadata"],r);let l=i(n,["done"]);l!=null&&o(e,["done"],l);let u=i(n,["error"]);u!=null&&o(e,["error"],u);let a=i(n,["response"]);return a!=null&&o(e,["response"],us(s,a)),e}var fs="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";function ds(s,n,e){return C(this,null,function*(){let t,r;e.data instanceof Blob?r=JSON.parse(yield e.data.text()):r=JSON.parse(e.data),s.isVertexAI()?t=wi(s,r):t=Ri(s,r),n(t)})}var be=class{constructor(n,e,t){this.apiClient=n,this.auth=e,this.webSocketFactory=t}connect(n){return C(this,null,function*(){var e,t,r,l;let u=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c,f=hs(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${u}/ws/google.cloud.aiplatform.${a}.LlmBidiService/BidiGenerateContent`,yield this.auth.addAuthHeaders(f);else{let P=this.apiClient.getApiKey();c=`${u}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateContent?key=${P}`}let d=()=>{},p=new Promise(P=>{d=P}),h=n.callbacks,m=function(){var P;(P=h?.onopen)===null||P===void 0||P.call(h),d({})},g=this.apiClient,T={onopen:m,onmessage:P=>{ds(g,h.onmessage,P)},onerror:(e=h?.onerror)!==null&&e!==void 0?e:function(P){},onclose:(t=h?.onclose)!==null&&t!==void 0?t:function(P){}},E=this.webSocketFactory.create(c,ms(f),T);E.connect(),yield p;let v=L(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&v.startsWith("publishers/")){let P=this.apiClient.getProject(),w=this.apiClient.getLocation();v=`projects/${P}/locations/${w}/`+v}let x={};this.apiClient.isVertexAI()&&((r=n.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(n.config===void 0?n.config={responseModalities:[He.AUDIO]}:n.config.responseModalities=[He.AUDIO]),!((l=n.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let M={model:v,config:n.config,callbacks:n.callbacks};return this.apiClient.isVertexAI()?x=ui(this.apiClient,M):x=ai(this.apiClient,M),delete x.config,E.send(JSON.stringify(x)),new je(E,this.apiClient)})}},ps={turnComplete:!0},je=class{constructor(n,e){this.conn=n,this.apiClient=e}tLiveClientContent(n,e){if(e.turns!==null&&e.turns!==void 0){let t=[];try{t=R(n,e.turns),n.isVertexAI()?t=t.map(r=>ee(n,r)):t=t.map(r=>we(n,r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:t,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClientRealtimeInput(n,e){let t={};if(!("media"in e)||!e.media)throw new Error(`Failed to convert realtime input "media", type: '${typeof e.media}'`);return t={realtimeInput:{mediaChunks:[e.media],activityStart:e.activityStart,activityEnd:e.activityEnd}},t}tLiveClienttToolResponse(n,e){let t=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?t=e.functionResponses:t=[e.functionResponses],t.length===0)throw new Error("functionResponses is required.");for(let l of t){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!n.isVertexAI()&&!("id"in l))throw new Error(fs)}return{toolResponse:{functionResponses:t}}}sendClientContent(n){n=Object.assign(Object.assign({},ps),n);let e=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(e))}sendRealtimeInput(n){if(n.media==null)throw new Error("Media is required.");let e=this.tLiveClientRealtimeInput(this.apiClient,n);this.conn.send(JSON.stringify(e))}sendToolResponse(n){if(n.functionResponses==null)throw new Error("Tool response parameters are required.");let e=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}};function ms(s){let n={};return s.forEach((e,t)=>{n[t]=e}),n}function hs(s){let n=new Headers;for(let[e,t]of Object.entries(s))n.append(e,t);return n}var en=class extends j{constructor(n){super(),this.apiClient=n,this.generateContent=e=>C(this,null,function*(){return yield this.generateContentInternal(e)}),this.generateContentStream=e=>C(this,null,function*(){return yield this.generateContentStreamInternal(e)}),this.generateImages=e=>C(this,null,function*(){return yield this.generateImagesInternal(e).then(t=>{var r;let l,u=[];if(t?.generatedImages)for(let c of t.generatedImages)c&&c?.safetyAttributes&&((r=c?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=c?.safetyAttributes:u.push(c);let a;return l?a={generatedImages:u,positivePromptSafetyAttributes:l}:a={generatedImages:u},a})})}generateContentInternal(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=st(this.apiClient,n);return l=A("{model}:generateContent",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>{let f=at(this.apiClient,c),d=new b;return Object.assign(d,f),d})}else{let a=rt(this.apiClient,n);return l=A("{model}:generateContent",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>{let f=lt(this.apiClient,c),d=new b;return Object.assign(d,f),d})}})}generateContentStreamInternal(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=st(this.apiClient,n);l=A("{model}:streamGenerateContent?alt=sse",a._url),u=a._query,delete a.config,delete a._url,delete a._query;let c=this.apiClient;return r=c.requestStream({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}),r.then(function(f){return Pe(this,arguments,function*(){var d,p,h,m;try{for(var g=!0,T=Je(f),E;E=yield U(T.next()),d=E.done,!d;g=!0){m=E.value,g=!1;let x=at(c,yield U(m.json())),M=new b;Object.assign(M,x),yield yield U(M)}}catch(v){p={error:v}}finally{try{!g&&!d&&(h=T.return)&&(yield U(h.call(T)))}finally{if(p)throw p.error}}})})}else{let a=rt(this.apiClient,n);l=A("{model}:streamGenerateContent?alt=sse",a._url),u=a._query,delete a.config,delete a._url,delete a._query;let c=this.apiClient;return r=c.requestStream({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}),r.then(function(f){return Pe(this,arguments,function*(){var d,p,h,m;try{for(var g=!0,T=Je(f),E;E=yield U(T.next()),d=E.done,!d;g=!0){m=E.value,g=!1;let x=lt(c,yield U(m.json())),M=new b;Object.assign(M,x),yield yield U(M)}}catch(v){p={error:v}}finally{try{!g&&!d&&(h=T.return)&&(yield U(h.call(T)))}finally{if(p)throw p.error}}})})}})}embedContent(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=yr(this.apiClient,n);return l=A("{model}:predict",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>{let f=br(this.apiClient,c),d=new ve;return Object.assign(d,f),d})}else{let a=Oi(this.apiClient,n);return l=A("{model}:batchEmbedContents",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>{let f=Fr(this.apiClient,c),d=new ve;return Object.assign(d,f),d})}})}generateImagesInternal(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=Er(this.apiClient,n);return l=A("{model}:predict",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>{let f=ns(this.apiClient,c),d=new Ie;return Object.assign(d,f),d})}else{let a=Xi(this.apiClient,n);return l=A("{model}:predict",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>{let f=kr(this.apiClient,c),d=new Ie;return Object.assign(d,f),d})}})}get(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=_r(this.apiClient,n);return l=A("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>is(this.apiClient,c))}else{let a=Zi(this.apiClient,n);return l=A("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>qr(this.apiClient,c))}})}countTokens(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=Ir(this.apiClient,n);return l=A("{model}:countTokens",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>{let f=rs(this.apiClient,c),d=new xe;return Object.assign(d,f),d})}else{let a=ji(this.apiClient,n);return l=A("{model}:countTokens",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>{let f=zr(this.apiClient,c),d=new xe;return Object.assign(d,f),d})}})}computeTokens(n){return C(this,null,function*(){var e;let t,r="",l={};if(this.apiClient.isVertexAI()){let u=xr(this.apiClient,n);return r=A("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),t.then(a=>{let c=ss(this.apiClient,a),f=new Be;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")})}generateVideos(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=Pr(this.apiClient,n);return l=A("{model}:predictLongRunning",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>cs(this.apiClient,c))}else{let a=tr(this.apiClient,n);return l=A("{model}:predictLongRunning",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>Kr(this.apiClient,c))}})}};function gs(s,n){let e={},t=i(n,["operationName"]);t!=null&&o(e,["_url","operationName"],t);let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Cs(s,n){let e={},t=i(n,["operationName"]);t!=null&&o(e,["_url","operationName"],t);let r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function ys(s,n){let e={},t=i(n,["operationName"]);t!=null&&o(e,["operationName"],t);let r=i(n,["resourceName"]);r!=null&&o(e,["_url","resourceName"],r);let l=i(n,["config"]);return l!=null&&o(e,["config"],l),e}function Ts(s,n){let e={},t=i(n,["video","uri"]);t!=null&&o(e,["uri"],t);let r=i(n,["video","encodedVideo"]);r!=null&&o(e,["videoBytes"],J(s,r));let l=i(n,["encoding"]);return l!=null&&o(e,["mimeType"],l),e}function Es(s,n){let e={},t=i(n,["_self"]);return t!=null&&o(e,["video"],Ts(s,t)),e}function _s(s,n){let e={},t=i(n,["generatedSamples"]);t!=null&&(Array.isArray(t)?o(e,["generatedVideos"],t.map(u=>Es(s,u))):o(e,["generatedVideos"],t));let r=i(n,["raiMediaFilteredCount"]);r!=null&&o(e,["raiMediaFilteredCount"],r);let l=i(n,["raiMediaFilteredReasons"]);return l!=null&&o(e,["raiMediaFilteredReasons"],l),e}function vs(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);let r=i(n,["metadata"]);r!=null&&o(e,["metadata"],r);let l=i(n,["done"]);l!=null&&o(e,["done"],l);let u=i(n,["error"]);u!=null&&o(e,["error"],u);let a=i(n,["response","generateVideoResponse"]);return a!=null&&o(e,["response"],_s(s,a)),e}function Is(s,n){let e={},t=i(n,["gcsUri"]);t!=null&&o(e,["uri"],t);let r=i(n,["bytesBase64Encoded"]);r!=null&&o(e,["videoBytes"],J(s,r));let l=i(n,["mimeType"]);return l!=null&&o(e,["mimeType"],l),e}function xs(s,n){let e={},t=i(n,["_self"]);return t!=null&&o(e,["video"],Is(s,t)),e}function Ss(s,n){let e={},t=i(n,["videos"]);t!=null&&(Array.isArray(t)?o(e,["generatedVideos"],t.map(u=>xs(s,u))):o(e,["generatedVideos"],t));let r=i(n,["raiMediaFilteredCount"]);r!=null&&o(e,["raiMediaFilteredCount"],r);let l=i(n,["raiMediaFilteredReasons"]);return l!=null&&o(e,["raiMediaFilteredReasons"],l),e}function ut(s,n){let e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);let r=i(n,["metadata"]);r!=null&&o(e,["metadata"],r);let l=i(n,["done"]);l!=null&&o(e,["done"],l);let u=i(n,["error"]);u!=null&&o(e,["error"],u);let a=i(n,["response"]);return a!=null&&o(e,["response"],Ss(s,a)),e}var nn=class extends j{constructor(n){super(),this.apiClient=n}getVideosOperation(n){return C(this,null,function*(){let e=n.operation,t=n.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=e.name.split("/operations/")[0],l;return t&&"httpOptions"in t&&(l=t.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:r,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:e.name,config:t})})}getVideosOperationInternal(n){return C(this,null,function*(){var e,t;let r,l="",u={};if(this.apiClient.isVertexAI()){let a=Cs(this.apiClient,n);return l=A("{operationName}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),r.then(c=>ut(this.apiClient,c))}else{let a=gs(this.apiClient,n);return l=A("{operationName}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(c=>c.json()),r.then(c=>vs(this.apiClient,c))}})}fetchPredictVideosOperationInternal(n){return C(this,null,function*(){var e;let t,r="",l={};if(this.apiClient.isVertexAI()){let u=ys(this.apiClient,n);return r=A("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),t.then(a=>ut(this.apiClient,a))}else throw new Error("This method is only supported by the Vertex AI.")})}};var As="Content-Type",Ps="X-Server-Timeout",Ms="User-Agent",Ds="x-goog-api-client",Rs="0.9.0",ws=`google-genai-sdk/${Rs}`,Ns="v1beta1",Vs="v1beta",ct=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,tn=class extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ClientError"}},Me=class extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ServerError"}},on=class{constructor(n){var e,t;this.clientOptions=Object.assign(Object.assign({},n),{project:n.project,location:n.location,apiKey:n.apiKey,vertexai:n.vertexai});let r={};this.clientOptions.vertexai?(r.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:Ns,this.getProject()||this.getLocation()?(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(r.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Vs,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,n.httpOptions))}isVertexAI(){var n;return(n=this.clientOptions.vertexai)!==null&&n!==void 0?n:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||n.baseUrl===void 0||n.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let t=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&n.apiVersion!==""&&t.push(n.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let n=this.getBaseUrl(),e=new URL(n);return e.protocol="wss",e.toString()}setBaseUrl(n){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=n;else throw new Error("HTTP options are not correctly set.")}constructUrl(n,e,t){let r=[this.getRequestUrlInternal(e)];return t&&r.push(this.getBaseResourcePath()),n!==""&&r.push(n),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(n){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||n.httpMethod==="GET"&&n.path.startsWith("publishers/google/models"))}request(n){return C(this,null,function*(){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));let t=this.shouldPrependVertexProjectPath(n),r=this.constructUrl(n.path,e,t);if(n.queryParams)for(let[u,a]of Object.entries(n.queryParams))r.searchParams.append(u,String(a));let l={};if(n.httpMethod==="GET"){if(n.body&&n.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=n.body;return l=yield this.includeExtraHttpOptionsToRequestInit(l,e),this.unaryApiCall(r,l,n.httpMethod)})}patchHttpOptions(n,e){let t=JSON.parse(JSON.stringify(n));for(let[r,l]of Object.entries(e))typeof l=="object"?t[r]=Object.assign(Object.assign({},t[r]),l):l!==void 0&&(t[r]=l);return t}requestStream(n){return C(this,null,function*(){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));let t=this.shouldPrependVertexProjectPath(n),r=this.constructUrl(n.path,e,t);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=n.body,l=yield this.includeExtraHttpOptionsToRequestInit(l,e),this.streamApiCall(r,l,n.httpMethod)})}includeExtraHttpOptionsToRequestInit(n,e){return C(this,null,function*(){if(e&&e.timeout&&e.timeout>0){let t=new AbortController,r=t.signal;setTimeout(()=>t.abort(),e.timeout),n.signal=r}return n.headers=yield this.getHeadersInternal(e),n})}unaryApiCall(n,e,t){return C(this,null,function*(){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(r=>C(this,null,function*(){return yield ft(r),new ie(r)})).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})})}streamApiCall(n,e,t){return C(this,null,function*(){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(r=>C(this,null,function*(){return yield ft(r),this.processStreamResponse(r)})).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})})}processStreamResponse(n){var e;return Pe(this,arguments,function*(){let r=(e=n?.body)===null||e===void 0?void 0:e.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";for(;;){let{done:a,value:c}=yield U(r.read());if(a){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let f=l.decode(c);u+=f;let d=u.match(ct);for(;d;){let p=d[1];try{let h=new Response(p,{headers:n?.headers,status:n?.status,statusText:n?.statusText});yield yield U(new ie(h)),u=u.slice(d[0].length),d=u.match(ct)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{r.releaseLock()}})}apiCall(n,e){return C(this,null,function*(){return fetch(n,e).catch(t=>{throw new Error(`exception ${t} sending request`)})})}getDefaultHeaders(){let n={},e=ws+" "+this.clientOptions.userAgentExtra;return n[Ms]=e,n[Ds]=e,n[As]="application/json",n}getHeadersInternal(n){return C(this,null,function*(){let e=new Headers;if(n&&n.headers){for(let[t,r]of Object.entries(n.headers))e.append(t,r);n.timeout&&n.timeout>0&&e.append(Ps,String(Math.ceil(n.timeout/1e3)))}return yield this.clientOptions.auth.addAuthHeaders(e),e})}uploadFile(n,e){return C(this,null,function*(){var t;let r={};e!=null&&(r.mimeType=e.mimeType,r.name=e.name,r.displayName=e.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);let l=this.clientOptions.uploader,u=yield l.stat(n);r.sizeBytes=String(u.size);let a=(t=e?.mimeType)!==null&&t!==void 0?t:u.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;let c=yield this.fetchUploadUrl(r,e);return l.upload(n,c,this)})}fetchUploadUrl(n,e){return C(this,null,function*(){var t;let r={};e?.httpOptions?r=e.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${n.mimeType}`}};let l={file:n},u=yield this.request({path:A("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!u||!u?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let a=(t=u?.headers)===null||t===void 0?void 0:t["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a})}};function ft(s){return C(this,null,function*(){var n;if(s===void 0)throw new Me("response is undefined");if(!s.ok){let e=s.status,t=s.statusText,r;!((n=s.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?r=yield s.json():r={error:{message:"exception parsing response",code:s.status,status:s.statusText}};let l=`got status: ${e} ${t}. ${JSON.stringify(r)}`;throw e>=400&&e<500?new tn(l):e>=500&&e<600?new Me(l):new Error(l)}})}var Fs=1024*1024*8;function Ls(s,n,e){return C(this,null,function*(){var t,r;let l=0,u=0,a=new ie(new Response),c="upload";for(l=s.size;u<l;){let d=Math.min(Fs,l-u),p=s.slice(u,u+d);if(u+d>=l&&(c+=", finalize"),a=yield e.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(d)}}}),u+=d,((t=a?.headers)===null||t===void 0?void 0:t["x-goog-upload-status"])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}let f=yield a?.json();if(((r=a?.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file})}function Us(s){return C(this,null,function*(){return{size:s.size,type:s.type}})}var rn=class{upload(n,e,t){return C(this,null,function*(){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return yield Ls(n,e,t)})}stat(n){return C(this,null,function*(){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return yield Us(n)})}};var sn=class{create(n,e,t){return new ln(n,e,t)}},ln=class{constructor(n,e,t){this.url=n,this.headers=e,this.callbacks=t}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var dt="x-goog-api-key",an=class{constructor(n){this.apiKey=n}addAuthHeaders(n){return C(this,null,function*(){n.get(dt)===null&&n.append(dt,this.apiKey)})}};var ks="gl-node/",De=class{constructor(n){var e;if(n.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=n.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=n.apiKey,this.apiVersion=n.apiVersion;let t=new an(this.apiKey);this.apiClient=new on({auth:t,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:n.httpOptions,userAgentExtra:ks+"web",uploader:new rn}),this.models=new en(this.apiClient),this.live=new be(this.apiClient,t,new sn),this.chats=new Oe(this.models,this.apiClient),this.caches=new We(this.apiClient),this.files=new Ze(this.apiClient),this.operations=new nn(this.apiClient)}};var Q={VI:"Vietnamese",EN:"English",ZH:"Chinese"},xt=[Q.VI,Q.EN,Q.ZH];var St=[{find:"gi\u1EBFt",replace:"gi\u1EDBt"},{find:"Vi\u1EC7t Nam",replace:" "},{find:"ch\u1EBFt",replace:"ch\u1EDBt"},{find:"\u5FA1\u517D s\u01B0",replace:" Ng\u1EF1 Th\xFA S\u01B0 "},{find:"\u5DE8\u517D",replace:" qu\xE1i th\xFA "},{find:"\u5FA1\u517D",replace:"Ng\u1EF1 Th\xFA "},{find:"\u5FA1",replace:" Ng\u1EF1 "},{find:"\u5E08",replace:"S\u01B0 "},{find:"vi",replace:"Vi"},{find:"Hao Ci Lang Zhu",replace:"H\u1EA3o T\u1EED Lang Ch\u1EE7 "},{find:"Hao Ci Lang",replace:"H\u1EA3o T\u1EED Lang "},{find:"Zha Li Lu",replace:"Tr\xE1t L\u1EF1c L\u1ED7 "},{find:"Zhu Ming",replace:"Chu Minh "},{find:"Zhalilu",replace:"Tr\xE1t L\u1EF1c L\u1ED7 "},{find:"Wo qu\u1ED1c",replace:"Oa Qu\u1ED1c "},{find:"\u8003\u5B98",replace:" gi\xE1m th\u1ECB "},{find:"H\u61A8\u4ED4",replace:"H\xE1m T\u1EED "},{find:"\u5C38\u738B",replace:" "},{find:"Trung Qu\u1ED1c",replace:"Long Qu\u1ED1c "},{find:"Nh\u1EADt B\u1EA3n",replace:"A Qu\u1ED1c "},{find:"Vi\u1EC7t Qu\u1ED1c ",replace:" B Qu\u1ED1c "},{find:"\u0110\u1EA1i \u0110\u1ECBa C\u1EA3nh",replace:"\u0110\u1EA1i \u0110\u1EBF C\u1EA3nh "},{find:"ch\u1EBFt",replace:"ch\u1EDBt"},{find:"n\u01B0\u1EDBc Vi\u1EC7t",replace:" "},{find:"Tsim Sha Tsui",replace:"Ti\xEAm Sa Chu\u1EF7"},{find:"Causeway Bay",replace:"V\u1ECBnh \u0110\xF4ng La"},{find:"Yau Ma Tei",replace:"Du Ma \u0110\u1ECBa"},{find:"\u0110NA",replace:" "},{find:"\u0110\xF4ng Nam \xC1",replace:" "},{find:"\u5389\u9B3C",replace:"Qu\u1EF7 "},{find:"\u53B2\u9B3C",replace:" \xC1c Qu\u1EF7 "},{find:"\u8941\u8913",replace:" Giang Nh\u01B0\u1EE3c Tuy\u1EBFt "},{find:"\u80E1\u95F9",replace:" l\xE0m lo\u1EA1n "},{find:"\u8F38\u4E2A\u7CBE\u5149",replace:" thua \u0111\u1EBFn qu\u1EA7n l\xF3t kh\xF4ng c\xF2n "},{find:"\u8C79\u5B50",replace:" con b\xE1o "},{find:"\u597D\u770B",replace:"  \u0110\u1EB9p m\u1EB7t "},{find:"H\u75D5.",replace:" "},{find:"H\u75D5",replace:" "},{find:"\u5DEE\u4E0D\u591A\u4E86.",replace:" g\u1EA7n xong r\u1ED3i "},{find:"\u8986\u6CA1",replace:" di\u1EC7t "},{find:"B\u1EAFc Giao",replace:"B\u1EAFc Th\xE0nh "},{find:"Ho\xE0ng Sa",replace:"  "},{find:"Tao",replace:"Ta"},{find:"Th\xF4n Th\u1EF1c Tinh Kh\xF4ng",replace:"Th\xF4n Ph\u1EC7 Tinh Kh\xF4ng"},{find:"zombie m\u1EB9",replace:"zombie "},{find:"Ph\u1EA1m T\u1ECBnh",replace:"Ph\u1EA1m Ti\u1EC7n "},{find:" anh ta ",replace:" c\u1EADu ta "},{find:"C\u1ED1 Ph\u1EA3n",replace:"C\u1ED1 Ph\xE0m "},{find:"Tr\u01B0\u1EDDng Sa",replace:"B\u1EAFc Kinh "},{find:"n\u01B0\u1EDBc Nga ",replace:"N\u01B0\u1EDBc T"},{find:"G\u1EA5u Nga",replace:"G\u1EA5u C"},{find:"n\u01B0\u1EDBc R\u1ED3ng",replace:"Long Qu\u1ED1c"},{find:"Let me translate these subtitles while maintaining context and consistency:",replace:" "},{find:"L\u01B0u Nh\u01B0 Y\xEAn",replace:"Li\u1EC5u Nh\u01B0 Y\xEAn "},{find:"Thi\u1EBFu gia 13",replace:"Th\u1EADp Tam Thi\u1EBFu Gia "},{find:"\xC2n Th\xED",replace:"\xE2n s\u01B0 "},{find:"vi\u1EC7t qu\u1ED1c",replace:" "},{find:"D\u1EA1 Nh\u01B0 Y\xEAn",replace:"Li\u1EC5u Nh\u01B0 Y\xEAn"},{find:"T\xF4 M\u1ED9c Ho\xE0n",replace:"T\xF4 M\u1ED9c Uy\u1EC3n"},{find:"Con t\xF4m",replace:"H\xE0 Nh\xE2n "},{find:"t\u1EF7 Th\u01B0\u01A1ng",replace:"Th\u01B0\u01A1ng T\u1EF7"},{find:"L\u01B0u Ch\xED Trung",replace:"Li\u1EC5u Ch\xED Trung"},{find:"T\xE2m Nh\u01B0 Tuy\u1EBFt",replace:"C\u01A1 Nh\u01B0 Tuy\u1EBFt"},{find:"Ji Ruxue",replace:"C\u01A1 Nh\u01B0 Tuy\u1EBFt"},{find:"Ji Ru Xue",replace:"C\u01A1 Nh\u01B0 Tuy\u1EBFt"},{find:"Lu Qi Qi",replace:"L\u1EE5c K\u1EF3 K\u1EF3"},{find:"Qi Qi",replace:"K\u1EF3 K\u1EF3"},{find:"Th\u1EA5t Th\u1EA5t",replace:"K\u1EF3 K\u1EF3"},{find:"K\xEA Nh\u01B0 Tuy\u1EBFt",replace:"C\u01A1 Nh\u01B0 Tuy\u1EBFt "},{find:"C\u01A1 Nh\u01B0 Huy\u1EBFt",replace:"C\u01A1 Nh\u01B0 Tuy\u1EBFt"},{find:"\u0110o\u1EA1n Th\u1EC3 c\xF4ng",replace:"\u0110o\xE1n Th\u1EC3 C\xF4ng"},{find:"D\u1EA1 Phong Ti\xEAu",replace:"Di\u1EC7p Ph\xE0m"},{find:"Anh Qu\u1ED1c",replace:"AA Qu\u1ED1c"},{find:"n\u01B0\u1EDBc anh",replace:"n\u01B0\u1EDBc AA"},{find:"Vi\u1EC7t Qu\u1ED1c",replace:""},{find:"n\u01B0\u1EDBc vi\u1EC7t",replace:" "},{find:"\u0110\u1EA1i Vi\u1EC7t",replace:" "},{find:"Ho\xE0ng Sa",replace:" "},{find:"Tr\u01B0\u1EDDng Sa",replace:""},{find:"H\xE0n Qu\u1ED1c",replace:"H Qu\u1ED1c"},{find:"qu\xE2n Anh",replace:"qu\xE2n AA"},{find:"Tri\u1EC1u Ti\xEAn",replace:"TT"},{find:"qu\xE2n vi\u1EC7t",replace:""},{find:"Hoa Qu\u1ED1c",replace:"Long Qu\u1ED1c"},{find:"Trung Hoa",replace:"Long Qu\u1ED1c"},{find:"Hoa H\u1EA1",replace:"Long Qu\u1ED1c"},{find:"Th\u1EA7n N\xFAi",replace:"S\u01A1n Th\u1EA7n"},{find:"Do\xE3n \u0110\u1EB1ng",replace:"Do\xE3n Th\xF4ng"},{find:"V\xE2n Th\xF4ng",replace:"Do\xE3n Th\xF4ng"},{find:"Du\u1EABn Th\xF4ng",replace:"Do\xE3n Th\xF4ng"},{find:"\u5F90\u5C71",replace:"T\u1EEB S\u01A1n "},{find:"\u6025\u4E2D\u751F\u667A",replace:" Th\u1EA5y nguy sinh k\u1EBF"},{find:"\u4E27\u5C38",replace:" Zombie "},{find:"Ti\xEAu Di\xEAu",replace:"Ti\xEAu Dao"},{find:"D\u0129 Ph\xE0m",replace:"B\u1EA5t Ph\xE0m"},{find:"L\xE2m B\u1EA5t Ph\xE0m",replace:"Ninh B\u1EA5t Ph\xE0m"},{find:"M\u1EC7nh B\u1EA5t Ph\xE0m",replace:"Ninh B\u1EA5t Ph\xE0m"},{find:"Ch\u1EE7 C\u01A1 k\u1EF3",replace:"Tr\xFAc C\u01A1 K\u1EF3"},{find:" Ch\u01B0 C\u01A1 nh\u1EA5t tr\u1ECDng",replace:" Tr\xFAc C\u01A1 Nh\u1EA5t Tr\u1ECDng"},{find:"ABK309",replace:"309"},{find:"Lian",replace:"Li\u1EC5m"},{find:"H\u1EE9a qu\u1EA3n s\u1EF1",replace:"qu\u1EA3n s\u1EF1"},{find:"\u867E\u4EC1 ",replace:" "},{find:"\u547D\u786C",replace:" "},{find:"\u7237",replace:""},{find:"\u9B48",replace:" Qu\u1EF7"},{find:"\u904D\u4F53\u9CDE\u4F24",replace:" Th\u01B0\u01A1ng T\xEDch Kh\u1EAFp Ng\u01B0\u1EDDi "},{find:"\u631F\u6301",replace:" b\u1EAFt c\xF3c "},{find:"L\u01B0\u1EDDi D\u01B0\u01A1ng",replace:"L\xE3nh D\u01B0\u01A1ng"},{find:"Ph\u1EE5c T\xF4 Gi\u1EA3",replace:"Ph\u1EE5c Sinh Gi\u1EA3"},{find:"AEBK073",replace:" "},{find:"\u0111\u1ED3 \u0103n v\u1EB7t",replace:" linh th\u1EA1ch"},{find:"c\xF4 ta",replace:"c\u1EADu ta"},{find:" anh ta ",replace:" c\u1EADu ta "},{find:" c\xF4 \u1EA5y ",replace:" c\u1EADu \u1EA5y "},{find:" anh \u1EA5y ",replace:" c\u1EADu \u1EA5y "}];var cn=`Given a JSON structure in $source_language, translate all textual content fully into natural, fluent $target_language, ensuring context and conversational flow are preserved.
Rules:
Translate absolutely everything, including names, short sentences, and fragments.
Names must be fully adapted into the target language, with no original characters, no pinyin, and no parentheses.
Do not retain any source language text in the translation.
Do not alter the JSON structure or any fields.
No annotations, explanations, or extra text outside the JSON.
Return only the fully translated JSON.
Data: `;var At=In("slideDownFade",[qe(":enter",[he({opacity:0,maxHeight:0}),Ge("300ms linear",he({maxHeight:"*",opacity:1}))]),qe(":leave",[Ge("300ms linear",he({maxHeight:0,opacity:0}))])]);function Gs(s,n){if(s&1&&I(0),s&2){let e=$(2);fe(" ",e.controlName," is required ")}}function qs(s,n){if(s&1&&(_(0,"span",0),K(1,Gs,1,1),y()),s&2){let e,t=$();S(),O((e=t.firstKeyError)==="required"?1:-1)}}var Ne=class s{control;controlName="";get firstKeyError(){return this.control?.touched,this.control?.dirty,Object.keys(this.control?.errors||{})[0]||""}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=Z({type:s,selectors:[["app-show-error"]],inputs:{control:"control",controlName:"controlName"},decls:1,vars:1,consts:[[1,"error"]],template:function(e,t){e&1&&K(0,qs,2,1,"span",0),e&2&&O(t.control!=null&&t.control.invalid&&(t.control!=null&&t.control.dirty||t.control!=null&&t.control.touched)?0:-1)},dependencies:[Tn],styles:[".error[_ngcontent-%COMP%]{display:inline-block;color:#cc3434;font-size:14px;margin-top:4px;overflow:hidden}"],data:{animation:[At]}})};function Dt(s){return/[\u4E00-\u9FFF]/.test(s)}function Rt(s){return/[àáạảãâầấậẩẫăằắặẳẵèéẹẻẽêềếệểễìíịỉĩòóọỏõôồốộổỗơờớợởỡùúụủũưừứựửữỳýỵỷỹđ]/i.test(s)}function wt(s){return/^[A-Za-z0-9\s.,'";:!?()-]+$/.test(s.trim())}function fn(s){return new Promise(n=>setTimeout(n,s))}function Nt(s,n){let e=s;for(let t of n){let r=new RegExp(t.find.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");e=e.replace(r,t.replace)}return e}function zs(s,n){s&1&&(_(0,"div",0),I(1,"Translating"),F(2,"span",1),y())}var Ve=class s{isLoading=!1;static \u0275fac=function(e){return new(e||s)};static \u0275cmp=Z({type:s,selectors:[["app-translate-loading"]],inputs:{isLoading:"isLoading"},decls:1,vars:1,consts:[[1,"dot-loading"],[1,"dots"]],template:function(e,t){e&1&&K(0,zs,3,0,"div",0),e&2&&O(t.isLoading?0:-1)},styles:['.dot-loading[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#4a90e2;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;position:relative}.dots[_ngcontent-%COMP%]:after{content:"";animation:_ngcontent-%COMP%_dotsAnimation 2s infinite steps(4);position:absolute;width:16px;right:-16px}@keyframes _ngcontent-%COMP%_dotsAnimation{0%{content:""}25%{content:"."}50%{content:".."}75%{content:"..."}to{content:""}}']})};var Hs=()=>({minRows:5,maxRows:7});function Bs(s,n){if(s&1&&F(0,"nz-option",13),s&2){let e=n.$implicit;D("nzLabel",e)("nzValue",e)}}function $s(s,n){if(s&1&&F(0,"nz-option",13),s&2){let e=n.$implicit;D("nzLabel",e)("nzValue",e)}}function Ks(s,n){if(s&1){let e=ke();_(0,"h3",28),I(1,"File Infomation"),y(),_(2,"div",29)(3,"div",30)(4,"div",31),F(5,"ion-icon",32),_(6,"div",33)(7,"h5",34),I(8),y(),_(9,"span",35),I(10),y()()(),F(11,"app-translate-loading",36),_(12,"div",37),F(13,"nz-progress",38),_(14,"button",39),H("click",function(){N(e);let r=$();return V(r.checkFile())}),I(15," Check File "),y(),_(16,"button",40),H("click",function(){N(e);let r=$();return V(r.onDeleteFile())}),I(17," Delete "),y(),_(18,"button",41),H("click",function(){N(e);let r=$();return V(r.onTranslate())}),I(19," Translate "),y(),_(20,"button",41),H("click",function(){N(e);let r=$();return V(r.onDownloadFile())}),I(21," Download file "),y()()()()}if(s&2){let e=$();S(8),ce(e.file.name),S(2),fe("",e.file.size," byte"),S(),D("isLoading",e.isTranslating),S(2),D("nzWidth",64)("nzPercent",e.percent),S(),D("disabled",e.percent<100||e.isTranslating),S(2),D("disabled",e.isTranslating),S(2),D("disabled",e.isTranslating||e.countItemSuccess>0),S(2),D("disabled",e.percent<100)}}function Ys(s,n){s&1&&(ae(0),_(1,"span"),I(2,"The translated data will be lost. Are you sure you want to proceed?"),y(),ue())}function Ws(s,n){if(s&1&&(_(0,"p"),I(1),y(),_(2,"p"),I(3),y(),_(4,"p"),I(5),y(),_(6,"p"),I(7,"\xA0"),y()),s&2){let e=n.$implicit;S(),ce(e.index),S(2),Cn("",e.startTime," --> ",e.endTime,""),S(2),ce(e.text)}}function Js(s,n){if(s&1&&(ae(0),_(1,"div",42),se(2,Ws,8,4,null,null,re),y(),ue()),s&2){let e=$();S(2),le(e.dataError)}}function Os(s,n){if(s&1&&(ae(0),_(1,"div",43)(2,"div",44)(3,"h3"),I(4,"L\u01B0u \xFD:"),y(),_(5,"p")(6,"span",45),I(7,"-"),y(),I(8," $source_language, $target_language l\xE0 2 tr\u01B0\u1EDDng t\u01B0\u01A1ng \u1EE9ng v\u1EDBi 2 tr\u01B0\u1EDDng ng\xF4n ng\u1EEF b\xEAn ngo\xE0i, c\u1EA7n gi\u1EEF nguy\xEAn 2 tr\u01B0\u1EDDng n\xE0y v\xE0 \u0111\u1EB7t v\xE0o v\u1ECB tr\xED t\u01B0\u01A1ng \u1EE9ng "),y(),_(9,"p")(10,"span",45),I(11,"-"),y(),I(12," Context n\xE0y s\u1EBD \u0111\u01B0\u1EE3c n\u1ED1i v\u1EDBi n\u1ED9i dung c\u1EA7n d\u1ECBch, n\u1EBFu n\u1ED9i dung t\u1ED5ng qu\xE1 d\xE0i, hi\u1EC7u qu\u1EA3 d\u1ECBch s\u1EBD kh\xF4ng cao, h\xE3y gi\u1EA3m s\u1ED1 l\u01B0\u1EE3ng \u0111o\u1EA1n d\u1ECBch c\xF9ng l\xFAc (Number of segments per call) ph\xF9 h\u1EE3p \u0111\u1EC3 \u0111\u1EA1t \u0111\u01B0\u1EE3c hi\u1EC7u qu\u1EA3 t\u1ED1t nh\u1EA5t. "),y(),_(13,"p")(14,"span",45),I(15,"-"),y(),I(16," Ch\u1EC9 n\xEAn th\xEAm c\xE1c th\xF4ng tin th\xEAm cho context, kh\xF4ng n\xEAn s\u1EEDa ph\u1EA7n Rules. N\u1EBFu c\xF3 s\u1EEDa ph\u1EA7n Rules, h\xE3y \u0111\u1EA3m b\u1EA3o rules m\u1EDBi bao g\u1ED3m rule hi\u1EC7n t\u1EA1i. "),y()(),_(17,"div",6)(18,"div",46)(19,"label",8),I(20,"Number of segments per call"),y(),F(21,"input",47)(22,"app-show-error",48),y(),_(23,"div",46)(24,"label",8),I(25,"Retry count on failure"),y(),F(26,"input",49)(27,"app-show-error",50),y(),_(28,"div",46)(29,"label",8),I(30,"Number of concurrent"),y(),F(31,"input",51)(32,"app-show-error",52),y(),_(33,"div",46)(34,"label",8),I(35,"Time sleep concurrent (ms)"),y(),F(36,"input",53)(37,"app-show-error",54),y(),_(38,"div",55)(39,"label",8),I(40,"Context"),y(),F(41,"textarea",56)(42,"app-show-error",57),y()()(),ue()),s&2){let e=$();S(21),D("formControl",e.formData.controls.chunkSize),S(),D("control",e.formData.controls.chunkSize),S(4),D("formControl",e.formData.controls.countRetry),S(),D("control",e.formData.controls.countRetry),S(4),D("formControl",e.formData.controls.concurrent),S(),D("control",e.formData.controls.concurrent),S(4),D("formControl",e.formData.controls.timeSleepConcurrent),S(),D("control",e.formData.controls.timeSleepConcurrent),S(4),D("nzAutosize",yn(11,Hs))("formControl",e.formData.controls.context),S(),D("control",e.formData.controls.context)}}var Ft=class s{unloadNotification(n){n.preventDefault(),n.returnValue=""}loadingService=oe(Pn);fb=oe(Un);notificationService=oe(Wn);activatedRouter=oe(En);CHUNK_SIZE=50;googleGenAI=null;LANGUAGES=xt;formData=this.fb.group({apiKey:this.fb.control(void 0,Y.required),targetLanguage:this.fb.control("Vietnamese",Y.required),sourceLanguage:this.fb.control("Chinese",Y.required),context:this.fb.control(cn,Y.required),countRetry:this.fb.control(5,Y.required),chunkSize:this.fb.control(50,Y.required),concurrent:this.fb.control(20,Y.required),timeSleepConcurrent:this.fb.control(5e3,Y.required)});file=void 0;dataParse=[];dataParseMap={};dataError=[];percent=0;countItemSuccess=0;countRetry=0;isTranslating=!1;isVisibleDialogConfirmDelete=!1;isVisibleDialogViewDataError=!1;isVisibleDialogConfigContext=!1;currentTranslatingLanguage;constructor(){this.activatedRouter.queryParams.subscribe(n=>{let e=n.chunkSize;this.CHUNK_SIZE=parseInt(e)||50})}ngOnInit(){let n=localStorage.getItem("DEFAULT_DATA");if(n){let e=JSON.parse(n);this.CHUNK_SIZE=parseInt(`${e?.chunkSize}`)||50,this.formData.patchValue(e)}}onFileDropped(n){if(!n?.length)return;if(n.length>1){alert("Vui l\xF2ng ch\u1EC9 nh\u1EADp 1 file");return}let e=n[0];if(e.name&&!e.name.toLowerCase().endsWith(".srt")){this.notificationService.error("Error!","Please select only .srt files");return}this.handleFile(e)}uploadFile(n){let e=n.target,t=e.files;if(t?.length){if(t.length>1){alert("Vui l\xF2ng ch\u1EC9 upload 1 file");return}this.handleFile(t[0]),e.value=""}}handleFile(n){this.file=n,this.resetParams()}resetParams(){this.dataParse=[],this.dataParseMap={},this.percent=0,this.countItemSuccess=0,this.isTranslating=!1,this.countRetry=0,this.dataError=[]}onTranslate(){if(this.formData.invalid){this.formData.markAllAsTouched();return}this.currentTranslatingLanguage=this.formData.getRawValue(),this.readFile(this.file)}readFile(n){if(!n)return;let e=new FileReader;e.onload=t=>{let r=t.target.result,l=this.parseSRT(r);this.dataParse=l,console.log("Data parse: ",l),this.dataParseMap=l.reduce((u,a)=>Ue(Le({},u),{[a.index]:a}),{}),this.handleCallGenimi()},e.readAsText(n)}parseSRT(n){return n.trim().split(/\r?\n\r?\n/).map(t=>{let r=t.split(/\r?\n/),l=parseInt(r[0]),[u,a]=r[1].split(" --> "),c=r.slice(2).join(`
`);return{index:l,startTime:u,endTime:a,text:c}})}handleCallGenimi(){return C(this,null,function*(){let{apiKey:n}=this.formData.getRawValue();if(!n||(this.googleGenAI=new De({apiKey:n.trim()}),!this.googleGenAI))return;if(this.isTranslating=!0,yield this.apiKeyInvalid()){this.isTranslating=!1,this.notificationService.error("Opps!","Invalid API key. Please check again!");return}this.handleTranslate(this.dataParse)})}apiKeyInvalid(){return C(this,null,function*(){let[n,e]=yield this.googleGenAI.models.generateContent({model:"gemini-2.0-flash",contents:"Hello gemini!"}).then(t=>[t,null]).catch(t=>[null,t]);return!!e})}handleTranslate(n){return C(this,null,function*(){let{sourceLanguage:e,targetLanguage:t}=this.formData.getRawValue(),r=this.formData.controls.context.value||"";if(!r||!e||!t)return;r=r.replace("$source_language",e),r=r.replace("$target_language",t),console.log("Context: ",r);let l=parseInt(this.formData.controls.concurrent.value+"")||2,u=parseInt(this.formData.controls.timeSleepConcurrent.value+"")||1e3,a=this.chunkArray(n),c=-1;for(;c<a.length;){console.log("Count step start: ",c+1);let f=[];for(let d=0;d<l;++d)f.push(this.translating(a,++c,r));yield Promise.all(f),console.log("Count step end: ",c),console.log("Sleeping: =========================="),yield fn(u)}this.isTranslating=!1})}translating(n,e,t){return C(this,null,function*(){if(e>=n.length)return;console.log("Translating index: ",e);let l=n[e].reduce((d,p)=>Ue(Le({},d),{[p.index]:p.text}),{}),u=`
      ${t}
      ${JSON.stringify(l)}
    `,a=this.googleGenAI.models.generateContent({model:"gemini-2.0-flash",contents:u}),[c,f]=yield a.then(d=>[d.text,null]).catch(d=>[null,d]);if(f){if(this.countRetry++,console.warn("\u2757Call gemni error: ",e,"== :: ==",f),yield fn(5e3),this.countRetry>5){this.notificationService.error("Opps!","There are too many requests for the current API key. Please change the API key or try again after some time!",{nzDuration:2e4});return}console.log("\u2757Retry: ",e),this.translating(n,e,t)}else this.countRetry=0,this.getRawJSON(c,e),this.countItemSuccess+=this.CHUNK_SIZE,this.percent=Math.floor(this.countItemSuccess/this.dataParse.length*100)})}getRawJSON(n,e){let t=this.findValidJson(n);if(!t){console.warn("\u2757Kh\xF4ng t\xECm th\u1EA5y JSON trong ph\u1EA3n h\u1ED3i. V\u1ECB tr\xED: ",this.CHUNK_SIZE*e);return}Object.keys(t).forEach(r=>{r&&this.dataParseMap[r]&&(this.dataParseMap[r].text=Nt(t[r],St))})}findValidJson(n){let e=[...n.matchAll(/\{[\s\S]*?\}/g)];for(let t of e)try{let r=JSON.parse(t[0]);return console.log("\u2705 JSON finded: ",r),r}catch(r){console.error("\u274C JSON parse error:",r)}return null}chunkArray(n){let e=[];for(let t=0;t<n.length;t+=this.CHUNK_SIZE)e.push(n.slice(t,t+this.CHUNK_SIZE));return e}convertToSrt(n){return n.map(e=>`${e.index}
${e.startTime} --> ${e.endTime}
${e.text}`).join(`

`)}downloadSRT(n){let e=Object.keys(this.dataParseMap).reduce((a,c)=>(a.push(this.dataParseMap[c]),a),[]),t=this.convertToSrt(e),r=new Blob([t],{type:"text/plain;charset=utf-8"}),l=URL.createObjectURL(r),u=document.createElement("a");u.href=l,u.download=n,u.click(),URL.revokeObjectURL(l)}onDeleteFile(){if(this.isTranslating||this.countItemSuccess){this.isVisibleDialogConfirmDelete=!0;return}this.file=void 0,this.resetParams()}handleCancelDelete(){this.isVisibleDialogConfirmDelete=!1}handleConfirmDelete(){this.isVisibleDialogConfirmDelete=!1,this.file=void 0,this.resetParams()}onDownloadFile(){let n=this.formData.controls.targetLanguage.value,e=this.file?.name?.split(".")[0];this.downloadSRT(`${e}_${n}.srt`)}checkFile(){let{sourceLanguage:n,targetLanguage:e}=this.currentTranslatingLanguage||{};if(n===e){this.notificationService.error("Opps!","The source language and target language are the same. Please check again!");return}let t=Object.keys(this.dataParseMap).reduce((r,l)=>(r.push(this.dataParseMap[l]),r),[]);if(this.dataError=t.filter(r=>{switch(n){case Q.ZH:return Dt(r.text);case Q.VI:return Rt(r.text);case Q.EN:return wt(r.text)}return!1}),this.dataError.length===0){this.notificationService.success("Great ^^!","All records have been translated successfully",{nzDuration:1e4});return}this.isVisibleDialogViewDataError=!0}handleCloseDialogViewDataError(){this.isVisibleDialogViewDataError=!1}handleRetranslateDataError(){this.isTranslating=!0,this.isVisibleDialogViewDataError=!1,this.handleTranslate([...this.dataError]),this.dataError=[]}onReset(){this.formData.controls.context.setValue(cn),this.formData.controls.chunkSize.setValue(50),this.formData.controls.countRetry.setValue(5),this.formData.controls.concurrent.setValue(10),this.formData.controls.timeSleepConcurrent.setValue(5e3)}onConfirm(){let{context:n,chunkSize:e,countRetry:t}=this.formData.getRawValue();if(!n||!e||!t){this.formData.markAllAsTouched();return}this.isVisibleDialogConfigContext=!1,this.CHUNK_SIZE=parseInt(`${e}`)||50,localStorage.setItem("DEFAULT_DATA",JSON.stringify({context:n,chunkSize:e,countRetry:t}))}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=Z({type:s,selectors:[["app-upload-file"]],hostBindings:function(e,t){e&1&&H("beforeunload",function(l){return t.unloadNotification(l)},!1,hn)},decls:45,vars:9,consts:[["uploadFileElement",""],[1,"upload-file",3,"formGroup"],[1,"header"],[1,"wrap-icon",3,"click"],["name","settings-outline"],[1,"mt-4"],[1,"row"],[1,"group-control","col","col-12","col-md-6"],[1,"control-label","required","mb-1"],["nz-input","","placeholder","Enter API key","type","text","formControlName","apiKey"],["controlName","API key",3,"control"],[1,"row","mt-2"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a language","formControlName","sourceLanguage"],[3,"nzLabel","nzValue"],["controlName","Source language",3,"control"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a language","formControlName","targetLanguage"],["controlName","Target language",3,"control"],["appDragDrop","",1,"box-upload","mt-4",3,"fileDropped"],["name","cloud-upload-outline",1,"icon"],[1,"wrap-text"],[1,"text"],[1,"text-small"],[1,"button-upload",3,"click"],["type","file","accept",".srt",1,"d-none",3,"change"],["nzTitle","Warning","nzCancelText","Cancel","nzOkText","Ok",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],[4,"nzModalContent"],["nzTitle","List of failed records.","nzCancelText","Cancel","nzOkText","Translating failed records",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],["nzTitle","Config context","nzCancelText","Reset To Default","nzOkText","Confirm","nzWidth","750px",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzClosable"],[1,"header","mt-4"],[1,"box-file"],[1,"box","d-flex","align-items-center","justify-content-between"],[1,"box-left","d-flex","items-center"],["name","document-outline",1,"file-icon"],[1,"d-flex","flex-column","justify-content-center"],[1,"file-name"],[1,"file-size"],[3,"isLoading"],[1,"box-right"],["size","small","nzType","circle",2,"margin-right","30px",3,"nzWidth","nzPercent"],["nz-button","","nzType","default",1,"mx-2",3,"click","disabled"],["nz-button","","nzType","default","nzDanger","",1,"mx-2",3,"click","disabled"],["nz-button","","nzType","primary",1,"mx-2",3,"click","disabled"],[2,"max-height","500px","overflow-y","auto"],[2,"max-height","500px","overflow-y","auto","overflow-x","hidden"],[1,"note"],[1,"mark-note"],[1,"group-control","col","col-12","col-md-6","mt-2"],["nz-input","","nz-tooltip","","placeholder","Input retry count on failure","type","number",3,"formControl"],["controlName","Number of segments per call",3,"control"],["nz-input","","nz-tooltip","","nzTooltipTrigger","focus","nzTooltipPlacement","topLeft","nzTooltipOverlayClassName","numeric-input","type","number","placeholder","Input retry count on failure",3,"formControl"],["controlName","Retry count on failure",3,"control"],["nz-input","","nz-tooltip","","placeholder","Input number of concurrent","type","number",3,"formControl"],["controlName","Number of concurrent",3,"control"],["nz-input","","nz-tooltip","","placeholder","Time sleep concurrent","type","number",3,"formControl"],["controlName","Time sleep concurrent",3,"control"],[1,"group-control","col","col-12","mt-2"],["nz-input","","placeholder","Enter context gemini",3,"nzAutosize","formControl"],["controlName","Context",3,"control"]],template:function(e,t){if(e&1){let r=ke();_(0,"form",1)(1,"h3",2),I(2,"Upload file .srt"),y(),_(3,"span",3),H("click",function(){return N(r),V(t.isVisibleDialogConfigContext=!0)}),F(4,"ion-icon",4),y(),_(5,"div",5)(6,"div",6)(7,"div",7)(8,"label",8),I(9,"API key"),y(),F(10,"input",9)(11,"app-show-error",10),y()(),_(12,"div",11)(13,"div",7)(14,"label",8),I(15,"Source language"),y(),_(16,"nz-select",12),se(17,Bs,1,2,"nz-option",13,re),y(),F(19,"app-show-error",14),y(),_(20,"div",7)(21,"label",8),I(22,"Target language"),y(),_(23,"nz-select",15),se(24,$s,1,2,"nz-option",13,re),y(),F(26,"app-show-error",16),y()()(),_(27,"div",17),H("fileDropped",function(u){return N(r),V(t.onFileDropped(u))}),F(28,"ion-icon",18),_(29,"div",19)(30,"h4",20),I(31,"Drag and drop a file into this area to upload"),y(),_(32,"span",21),I(33,"OR"),y()(),_(34,"button",22),H("click",function(){N(r);let u=gn(37);return V(u.click())}),I(35," Select file "),y()()(),_(36,"input",23,0),H("change",function(u){return N(r),V(t.uploadFile(u))}),y(),K(38,Ks,22,9),_(39,"nz-modal",24),me("nzVisibleChange",function(u){return N(r),pe(t.isVisibleDialogConfirmDelete,u)||(t.isVisibleDialogConfirmDelete=u),V(u)}),H("nzOnCancel",function(){return N(r),V(t.handleCancelDelete())})("nzOnOk",function(){return N(r),V(t.handleConfirmDelete())}),K(40,Ys,3,0,"ng-container",25),y(),_(41,"nz-modal",26),me("nzVisibleChange",function(u){return N(r),pe(t.isVisibleDialogViewDataError,u)||(t.isVisibleDialogViewDataError=u),V(u)}),H("nzOnCancel",function(){return N(r),V(t.handleCloseDialogViewDataError())})("nzOnOk",function(){return N(r),V(t.handleRetranslateDataError())}),K(42,Js,4,0,"ng-container",25),y(),_(43,"nz-modal",27),me("nzVisibleChange",function(u){return N(r),pe(t.isVisibleDialogConfigContext,u)||(t.isVisibleDialogConfigContext=u),V(u)}),H("nzOnCancel",function(){return N(r),V(t.onReset())})("nzOnOk",function(){return N(r),V(t.onConfirm())}),K(44,Os,43,12,"ng-container",25),y()}e&2&&(D("formGroup",t.formData),S(11),D("control",t.formData.controls.apiKey),S(6),le(t.LANGUAGES),S(2),D("control",t.formData.controls.sourceLanguage),S(5),le(t.LANGUAGES),S(2),D("control",t.formData.controls.targetLanguage),S(12),O(t.file?38:-1),S(),de("nzVisible",t.isVisibleDialogConfirmDelete),S(2),de("nzVisible",t.isVisibleDialogViewDataError),S(2),de("nzVisible",t.isVisibleDialogConfigContext),D("nzClosable",!1))},dependencies:[_n,An,Sn,vn,xn,kn,wn,Mn,Nn,Dn,Rn,Vn,Fn,Ln,zn,Gn,qn,$n,Bn,Hn,Yn,Kn,Ne,Qn,On,Jn,Ve],styles:[".upload-file[_ngcontent-%COMP%]{position:relative}.wrap-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;cursor:pointer}.wrap-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.header[_ngcontent-%COMP%]{font-size:24px;font-weight:600}.options[_ngcontent-%COMP%]{display:flex;margin:12px 0}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%] + .option[_ngcontent-%COMP%]{margin-left:12px}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:6px}.group-control[_ngcontent-%COMP%]{display:flex;flex-direction:column}.group-control[_ngcontent-%COMP%]   .control-input[_ngcontent-%COMP%]{outline:none;border:1px solid #ccc;padding:4px 8px;border-radius:4px;margin-top:4px}.box-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;border:2px dashed #1890ff;height:200px;border-radius:12px;margin-top:16px;padding:30px 0;cursor:pointer}.box-upload[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:40px}.box-upload[_ngcontent-%COMP%]   .wrap-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.box-upload[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:18px}.box-upload[_ngcontent-%COMP%]   .text-small[_ngcontent-%COMP%]{font-size:14px;margin-top:6px;display:inline-block}.box-upload[_ngcontent-%COMP%]   .button-upload[_ngcontent-%COMP%]{background-color:transparent;outline:none;border:1px solid #ccc;border-radius:4px;padding:6px 14px}.box-file[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{padding:12px;border:1px solid #1890ff;border-radius:6px;margin-top:12px}.box-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{display:inline-block;margin-right:6px;font-size:46px}.box-file[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:600}.box-file[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:13px}.mark-note[_ngcontent-%COMP%]{display:inline-block;margin:0 2px 0 8px}"]})};export{Ft as UploadFileComponent};
